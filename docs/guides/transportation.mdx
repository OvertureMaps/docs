---
title: Transportation
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import QueryBuilder from '@site/src/components/queryBuilder';
import SegmentBBOX from '!!raw-loader!@site/src/queries/duckdb/segment_bbox.sql';
import ParkingAisles from '!!raw-loader!@site/src/queries/duckdb/transportation_parking.sql';
import Routes from '!!raw-loader!@site/src/queries/duckdb/transportation_routes.sql';
import SpeedLimits from '!!raw-loader!@site/src/queries/athena/transportation_speed_limits.sql';
import ConnectingSegments from '!!raw-loader!@site/src/queries/athena/transportation_connecting_segments.sql';


## Overview

import DocCardList from '@theme/DocCardList';

The Overture transportation theme is the collection of LineString and Point features that describe the infrastructure and conventions of how people and objects travel around the world. The dataset contains two features types: `connector` and `segment`. The three subtypes within `segment` -- `road`, `rail`, and `water` -- contain familiar categories of transportation data: highways, footways, cycleways, railways, ferry routes, and public transportation. 

Most of the data in the transportation theme is sourced from OpenStreetMap. In the `2024-09-18.0` [release](/release), we began adding data from TomTom to improve coverage in key areas. 

You might use the Overture transportation data for:

- **mapping:** rendering a map of connected roads and paths.
- **routing:** calculating optimal routes from place to place.
- **navigation:** generating granular instructions on the maneuvers needed to
  follow a route.
- **analytics:** transportation-related analysis including traffic safety
  analysis and disaster planning.
- **geocoding:** getting the coordinates of street intersections (geocodes) or
  the street intersection near specific coordinates (reverse geocodes).

This guide is an overview of the transportation data. To dig into the details of the schema, see the [schema concepts for transportation](/schema/concepts/by-theme/transportation) and the reference documentation for the [segment](/schema/reference/transportation/segment) and [connector](/schema/reference/transportation/connector) feature types. 

## Dataset description

All Overture data, including transportation data, is distributed as GeoParquet, a column-based data structure. Below you'll find a table with column-by-column descriptions of the properties in the transportation feature type.

<details>
    <summary>Schema for GeoParquet files in the transportation theme</summary>
<div>
<Tabs>
<TabItem value="segment" label="segment" default>
| column_name | column_type | Description |
|---|---|---|
| id | VARCHAR | A feature ID. This may be an ID associated with the Global Entity Reference System (GERS) if—and-only-if the feature represents an entity that is part of GERS. |
| geometry | WKB | The line representation of the segment's location. Segment's geometry which MUST be a LineSting as defined by GeoJSON schema. |
| bbox | STRUCT | Area defined by two longitudes and two latitudes: latitude is a decimal number between -90.0 and 90.0; longitude is a decimal number between -180.0 and 180.0. |
| version | INTEGER | Version number of the feature, incremented in each Overture release where the geometry or attributes of this feature changed. |
| sources | STRUCT[] | The array of source information for the properties of a given feature, with each entry being a source object which lists the property in JSON Pointer notation and the dataset that specific value came from. All features must have a root level source which is the default source if a specific property's source is not specified. |
| subtype | VARCHAR | The broad category of transportation segment. |
| class | VARCHAR | Captures the kind of road and its position in the road network hierarchy. |
| subclass | VARCHAR | Specifies the usage of a length of road. |
| subclass_rules | STRUCT[] | Defines the portion of a road that the subclass applies to. |
| names | STRUCT[] | Properties defining the names of a feature. |
| connectors | STRUCT[] | Array of connector IDs identifying the connectors this segment is physically connected to linearly referenced with their location. Each connector is a possible routing decision point, meaning it defines a place along the segment in which there is possibility to transition to other segments which share the same connector. |
| routes | STRUCT[] | Routes this segment belongs to. |
| access_restrictions | STRUCT[] | Rules governing access to this road segment or lane. |
| level_rules | STRUCT[] | Defines the Z-order, i.e. stacking order, of the road segment. |
| prohibited_transitions | STRUCT[] | Defines where traveling from the segment to another is disallowed for navigation. This covers things situations prohibited turns or a transition from road to bike lane disallowing cars. |
| road_surface | STRUCT[] | Defines the surface material on a road such as paved, asphalt, or unpaved. |
| road_flags | STRUCT[] | Additional properties relevant to roads such as is_bridge or is_under_construction. |
| speed_limits | STRUCT[] | Defines the speed limit of the road segment. |
| width_rules | STRUCT[] | Defines the width of the road segment for rendering. |
| destinations | STRUCT[] | Describes the transitions from one segment to another on the way to a specified location. This data is primarily used for routing. |
</TabItem>
<TabItem value="connector" label="connector" default>
| column_name | column_type | Description |
|---|---|---|
| id | VARCHAR | A feature ID. This may be an ID associated with the Global Entity Reference System (GERS) if—and-only-if the feature represents an entity that is part of GERS. |
| geometry | BLOB | The line representation of the segment's location. Segment's geometry which MUST be a LineSting as defined by GeoJSON schema. |
| bbox | STRUCT | Area defined by two longitudes and two latitudes: latitude is a decimal number between -90.0 and 90.0; longitude is a decimal number between -180.0 and 180.0. |
| version | INTEGER | Version number of the feature, incremented in each Overture release where the geometry or attributes of this feature changed. |
| sources | STRUCT[] | The array of source information for the properties of a given feature, with each entry being a source object which lists the property in JSON Pointer notation and the dataset that specific value came from. All features must have a root level source which is the default source if a specific property's source is not specified. |
</TabItem>
</Tabs>
</div>
</details>

### Subtypes
Transportation segments are divided into three subtypes: **rail**, **water**, and **road**. The road subtype is then further divided into a variety of different classes based on usage captured in the table below.

<details>
    <summary>Class and subclass feature counts</summary>
<div>
<Tabs>
<TabItem value="classes" label="classes" default>
| subtype | class | subclass | Feature count, December 2024 release |
|---|---|---|---|
| rail |  |  | 1,585,021 |
| road | bridleway |  | 96,542 |
| road | cycleway | cycle_crossing | 49,372 |
| road | cycleway |  | 1,216,888 |
| road | footway | crosswalk | 1,921,434 |
| road | footway | sidewalk | 3,083,616 |
| road | footway |  | 14,834,696 |
| road | living_street |  | 3,198,724 |
| road | motorway | link | 632,849 |
| road | motorway |  | 432,631 |
| road | path |  | 12,900,432 |
| road | pedestrian |  | 451,802 |
| road | primary | link | 472,117 |
| road | primary |  | 6,550,752 |
| road | residential |  | 124,232,135 |
| road | secondary | link | 373,041 |
| road | secondary |  | 10,510,403 |
| road | service | alley | 1,570,311 |
| road | service | driveway | 15,530,080 |
| road | service | parking_aisle | 6,056,973 |
| road | service |  | 31,950,899 |
| road | steps |  | 1,722,268 |
| road | tertiary | link | 285,295 |
| road | tertiary |  | 19,321,726 |
| road | track |  | 24,295,660 |
| road | trunk | link | 533,676 |
| road | trunk |  | 3,361,208 |
| road | unclassified |  | 28,941,961 |
| road | unknown |  | 643,409 |
| water |  |  | 27,381 |
</TabItem>
</Tabs>
</div>
</details>

## Data access and retrieval

The latest transportation data can be obtained from AWS or Azure as GeoParquet files at the following locations. 
<Tabs>
<TabItem value="segment_url" label="Segment" default>
| Provider | Location |
| ------ | -------- |
| Amazon S3 | <QueryBuilder query="s3://overturemaps-us-west-2/release/__OVERTURE_RELEASE/theme=transportation/type=segment/" language="text"></QueryBuilder>|
| Azure Blob Storage | <QueryBuilder query="https://overturemapswestus2.blob.core.windows.net/release/__OVERTURE_RELEASE/theme=transportation/type=segment/" language="text"></QueryBuilder> |
</TabItem>
<TabItem value="connector_url" label="Connector" default>
| Provider | Location |
| ------ | -------- |
| Amazon S3 | <QueryBuilder query="s3://overturemaps-us-west-2/release/__OVERTURE_RELEASE/theme=transportation/type=connector/" language="text"></QueryBuilder>|
| Azure Blob Storage | <QueryBuilder query="https://overturemapswestus2.blob.core.windows.net/release/__OVERTURE_RELEASE/theme=transportation/type=connector/" language="text"></QueryBuilder> |
</TabItem>
</Tabs>

## Data usage guidelines

We recommend downloading only the Overture data you need. If you have a particular geographic area of interest, there are several options for using a simple bounding box to extract places data and output a GeoJSON file.

<Tabs>
<TabItem value="Python Command-line Tool" label="Python Command-line Tool" default>
First, follow the [setup guide for the Python Command-line Tool](/getting-data/overturemaps-py/).

Set type to either `segment` or `connector` and simply alter the `bbox` value to download a particular area.
```
overturemaps download --bbox=12.46,41.89,12.48,41.91 -f geojson --type=segment -o rome_segments.geojson
``` 
</TabItem>
<TabItem value="DuckDB" label="DuckDB" default>
First, follow the [setup guide for DuckDB](/getting-data/duckdb/).

Set the parquet link to either the **connector** or **segment** url depending on your needs.

Replace the `bbox.xmin` and `bbox.ymin` values with a new bounding box to run the query for a different area.
<QueryBuilder query={SegmentBBOX}></QueryBuilder>
</TabItem>
</Tabs>

## Data manipulation and analysis

### Querying by properties in DuckDB

These examples use data properties to filter the data in useful ways using DuckDB.
<Tabs>
<TabItem value="Query by class" label="Query by class" default>
The `class` column can be used to pull out subsets of the road data. Similarly, you could use subtype to select only water, rail, or road features. This example extracts only the **parking_aisle** features within the bounding box.
<QueryBuilder query={ParkingAisles}></QueryBuilder>
</TabItem>
<TabItem value="Query by routes" label="Query by routes" default>
You might be interested in a network of roads, such as a US Interstate. These can be extracted using the `routes` column and either using the `network` and `ref` properties and/or the `wikidata` column to identify the route.

This example extracts all the roads that are part of US I-5. To get all US Interstates simply remove `AND routes[1].ref = '5'` from the query.
<QueryBuilder query={Routes}></QueryBuilder>
</TabItem>
</Tabs>

### Querying by properties in Athena
Athena can allow for faster querying of the transportation layer than DuckDB given the size of the data. These examples are designed for Athena, but could be reworked for DuckDB with some tweaking.

<Tabs>
<TabItem value="Query by speed limit" label="Query by speed limit" default>
To properly return a linear referenced feature like a speed limit, we will need to query all the possible values of the feature as the queried value may only exist on one portion of the line. In this example, we're extracting roads with any speed limit `max_speed` value of **27** and unit of **mph** using the any_match function.

This same general query would also work for querying other similar columns such as `prohibited_transitions` and `access_restrictions`.
<QueryBuilder query={SpeedLimits}></QueryBuilder>
</TabItem>
<TabItem value="Select connecting segments" label="Select connecting segments" default>
With the `connectors` column it is simple to query for all features that connect with a particular segment without the need for a spatial query.

This example selects all the segments that that connect to the example id.
<QueryBuilder query={ConnectingSegments}></QueryBuilder>
</TabItem>
</Tabs>


## Tools and libraries

### transportation-splitter

| ![Overture Splitter](/img/transportation/splitter_concept.svg) | 
|:--:| 
| *Conceptual diagram of the splitter tool output. The numbers following 1234@ represent start_lr and end_lr values.* | 

The [transportation-spitter tool](https://github.com/OvertureMaps/transportation-splitter) transforms Overture road data into simpler sub segments. It will optionally divide features at each connector point and at each change of a [scoped based property](/schema/concepts/scoping-rules/), depending on configuration. Depending on your needs and map stack, the resulting dataset may be easier to manipulate than the original Overture data as each segment will only have connections at either end and have one set of properties for its entire length.

Since a GERS ID will no longer be unique with this output, the resulting data will have two additional columns: `start_lr` and `end_lr` which are linear references describing which section of the orginal feature this new segment comes from.

#### Splitter Example
To help visualize this process better, here is a real world example of a residential street in OpenStreetMap, Overture, and after being run through the splitter tool.
<Tabs>
<TabItem value="OpenStreetMap" label="OpenStreetMap" default>
| ![OpenStreetMap Splitter Example](/img/transportation/splitter_osm.png) |
|:--:| 
| In OpenStreetMap this residential road is represented by two different features with the same tags with feature 1 having an additional restricted access tag. |
</TabItem>
<TabItem value="Overture" label="Overture" default>
| ![Overture Splitter Example](/img/transportation/splitter_overture.png) |
|:--:| 
| In Overture the two segments have been combined into one feature and the restricted access tag has been stored as this linear reference in **access_restrictions**: 
`[{'access_type': allowed, 'when': {'during': NULL, 'heading': NULL, 'using': NULL, 'recognized': [as_private], 'mode': NULL, 'vehicle': NULL}, 'between': [0.521962729, 1.0]}]` | 
</TabItem>
<TabItem value="Transportation Splitter" label="Transportation Splitter" default>
![Splitter Output Example](/img/transportation/splitter_output.png)
|:--:| 
| The splitter has sliced the Overture feature at each connector point for the driveways as well as at the point where the access restriction begins. This results in six unique features in the output all still sharing the same GERS ID. |
</TabItem>
</Tabs>

#### More Information and Feedback

The tool requires a Spark environment to run and has been tested using Azure Databricks and AWS Glue. For set up information the [transportation-spitter GitHub](https://github.com/OvertureMaps/transportation-splitter) will contain the most up to date information as the tool is in active development still.

If you have feedback, questions, etc. on the tool you can create an [issue](https://github.com/OvertureMaps/transportation-splitter/issues) on the GitHub.


