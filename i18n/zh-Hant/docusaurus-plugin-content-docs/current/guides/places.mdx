---
title: 地點
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import QueryBuilder from '@site/src/components/queryBuilder';
import PlacesQuery from '!!raw-loader!@site/src/queries/duckdb/places.sql';
import RomeQuery from '!!raw-loader!@site/src/queries/duckdb/rome_places.sql';
import LithuaniaQuery from '!!raw-loader!@site/src/queries/duckdb/lithuania_places.sql';
import MillQuery from '!!raw-loader!@site/src/queries/duckdb/places_mills.sql';
import ConfidenceQuery from '!!raw-loader!@site/src/queries/duckdb/places_confidence.sql';
import ConflateOSMQuery from '!!raw-loader!@site/src/queries/duckdb/places_conflating_OSM.sql';
import PlacesInBuildingsQuery from '!!raw-loader!@site/src/queries/duckdb/places_in_buildings.sql';

:::note

本指南專注於 Overture places **資料** &mdash; 其內容、範圍、屬性和使用案例。若要解更多關於 Overture places **架構** 的相關資料，請參見 [架構參考文檔](/schema/reference/places/place)。

:::

## 概要

Overture places 主題有一個特徵類型，稱為 `place`，包含超過 5300 萬個真實世界實體的點表示：學校、商業、醫院、宗教組織、地標、山峰等。該主題源於 Meta 和 Microsoft 資料的合併，並在 [CDLA Permissive 2.0](https://cdla.dev/permissive-2-0/) 授權下提供。

| ![Overture places 主題覆蓋範圍](/img/places/places-coverage.png) | 
|:--:| 
| *Overture places 資料，按資料來源樣式：Meta 用紫色，Microsoft 用橙色。* | 

| 主要來源 |  特徵數量（2024 年 7 月版本） |
| -------------------------- | --------------------- |
| Meta | 約 4800 萬 |
| Microsoft | 約 550 萬 |



## 資料集描述

所有 Overture 資料，包括地點資料，都以 GeoParquet 格式分發，這是一種基於 column-based 的資料結構。以下是地點特徵類型的屬性表。特別是 `categories` 屬性；我們提供了可用類別的完整列表 [在這裡](https://github.com/OvertureMaps/schema/blob/main/task-force-docs/places/overture_categories.csv)。

<details>
    <summary>地點主題中 GeoParquet 檔案的架構</summary>
<div>
<Tabs>
<TabItem value="places" label="places" default>
| 欄位 | 類型 | 描述 |
|---|---|---|
| id | VARCHAR | 特徵 ID。如果該特徵代表的是 GERS（全球實體參考系統）的一部分，則此 ID 可能與 GERS 關聯。 |
| geometry | BLOB | 地點位置的點表示。地點的幾何形狀必須是 GeoJSON schema 定義的點。 |
| bbox | STRUCT | 由兩個經度和兩個緯度定義的區域：緯度為 -90.0 到 90.0 之間的十進制數；經度為 -180.0 到 180.0 之間的十進制數。 |
| version | INTEGER | 特徵的版本號，在每次 Overture 版本更新中，當該特徵的幾何形狀或屬性發生變化時，版本號會遞增。 |
| sources | STRUCT | 給定特徵屬性的源訊息數組，每個條目都是一個源對象，列出了 JSON 指標符號表示的屬性和該特定值來源的資料集。所有特徵必須有一個根級別的源，這是默認源，如果未指定特定屬性的源，則使用此默認源。 |
| names | STRUCT | 定義特徵名稱的屬性。 |
| categories | STRUCT | 地點的類別。完整列表可在 GitHub 上找到：https://github.com/OvertureMaps/schema/blob/main/task-force-docs/places/overture_categories.csv |
| confidence | DOUBLE | 地點存在的信心程度。數值範圍是 0 到 1 之間。0 表示我們確定該地點不存在（或不再存在）。1 表示我們確定該地點存在。如果沒有任何值，代表我們還沒有任何可信的訊息。 |
| websites | VARCHAR[] | 地點的網站。 |
| socials | VARCHAR[] | 地點的社交媒體 URL。 |
| emails | VARCHAR[] | 地點的電子郵件地址。 |
| phones | VARCHAR[] | 地點的電話號碼。 |
| brand | STRUCT | 地點的品牌。擁有多個品牌的位置被建模為多個獨立的地點，每個地點都有自己的品牌。 |
| addresses | STRUCT | 地點的地址。 |
</TabItem>
</Tabs>
</div>
</details>


## 資料的存取和檢索

最新的地點資料可以從 AWS 或 Azure 獲取，格式為 GeoParquet，位於以下位置：
| 供應商 | 位置 |
| ------ | -------- |
| Amazon S3 | <QueryBuilder query="s3://overturemaps-us-west-2/release/__OVERTURE_RELEASE/theme=places/type=place/" language="text"></QueryBuilder> |
| Azure Blob Storage | <QueryBuilder query="https://overturemapswestus2.blob.core.windows.net/release/__OVERTURE_RELEASE/theme=places/type=place/" language="text"></QueryBuilder> |

更多訊息可以在本文檔的 [獲取 Overture 資料](https://docs.overturemaps.org/getting-data/) 部分找到。您可以直接從上述 S3 或 Azure 位置下載整個資料集。警告：輸出將是一個非常大的檔案。

根據您的使用情況，以下方法可能更實用：

<Tabs>
<TabItem value="Python Command-line Tool" label="Python Command-line Tool" default>
首先，請遵循 [Python Command-line Tool 的設定指南](/getting-data/overturemaps-py/)。

```
overturemaps download -f geoparquet --type=place -o places.geoparquet
``` 
</TabItem>
<TabItem value="DuckDB" label="DuckDB" default>
首先，請遵循 [DuckDB 的設定指南](/getting-data/duckdb/)。

<QueryBuilder query={PlacesQuery}></QueryBuilder>
</TabItem>
</Tabs>

## 資料使用指南

我們建議僅下載您需要的 Overture 資料。如果您對特定的地理區域感興趣，有幾種選擇可以使用簡單的 bounding box 來提取地點資料並輸出 GeoJSON 檔案。

<Tabs>
<TabItem value="Overture Maps Explorer" label="Overture Maps Explorer" default>
要快速查看和下載適量的資料，您可以使用 [Overture Maps Explorer 網站](https://explore.overturemaps.org/#15.07/41.89731/12.47626)。

要下載資料：移動到您感興趣的區域，關閉其他圖層，然後點擊 `Download Visible`。

這樣將下載您螢幕上可見的區域。
</TabItem>
<TabItem value="Python Command-line Tool" label="Python Command-line Tool" default>
首先，請按照 [Python Command-line Tool的安裝指南](/getting-data/overturemaps-py/) 進行設定。

只需更改 `bbox` 值以下載特定區域。
```
overturemaps download --bbox=12.46,41.89,12.48,41.91 -f geojson --type=place -o rome.geojson
``` 
</TabItem>
<TabItem value="DuckDB" label="DuckDB" default>
首先，請按照 [DuckDB 的安裝指南](/getting-data/duckdb/) 進行設定。

用新的 bounding box 替換 `bbox.xmin` 和 `bbox.ymin` 值，以針對不同區域執行查詢。
<QueryBuilder query={RomeQuery}></QueryBuilder>
</TabItem>
</Tabs>

## 資料操作與分析

### 按屬性查詢

這些範例使用地址、類別和信心分數列中的資料屬性，以便通過 DuckDB 以有用的方式過濾資料。
<Tabs>
<TabItem value="Query by address" label="按地址查詢" default>
`address` 列可用於快速過濾資料到特定的政治單位。這個例子使用國家鍵來獲取所有在立陶宛的地址資料。區域也可以用來從較小的單位（例如美國州）中提取資料。
<QueryBuilder query={LithuaniaQuery}></QueryBuilder>
</TabItem>
<TabItem value="Query by category" label="按類別查詢" default>
要按特定類型的地點過濾資料，我們可以使用 `categories` 列。在這個例子中，我們將提取所有類別為 `rice_mill` 或 `flour_mill` 的地點。

完整的類別列表可以在 [這裡](https://github.com/OvertureMaps/schema/blob/main/task-force-docs/places/overture_categories.csv) 找到。
<QueryBuilder query={MillQuery}></QueryBuilder>
</TabItem>
<TabItem value="Query by confidence score" label="Query by confidence score" default>
假設您只想要確定存在且準確的資料。我們可以使用 `confidence` 分數來過濾低於某個閾值的資料，以排除任何可疑資料。
<QueryBuilder query={ConfidenceQuery}></QueryBuilder>
</TabItem>
</Tabs>

### 進階範例

這些範例展示了一些將地點資料與其他資料集結合的使用案例。

<Tabs>
<TabItem value="Conflate with OpenStreetMap" label="與 OpenStreetMap 結合" default>
Overture Places 可以作為一個有價值的來源，用於與您現有的資料集進行結合或增強。

在這個例子中，假設我們希望使用 OpenStreetMap 的 POI 進行一個項目，但希望用 Overture Places 的資料填補任何缺失的屬性，如地址或電話號碼。

通過一些基本的匹配邏輯，我們可以將這兩個資料集連接在一起，以創建一個更全面的最終產品。通過將 GERS ID 也連接到我們的輸出資料集，我們可以輕鬆地將現在合併的資料集與未來的 Overture 發行版本保持同步。

要自己執行此範例，可以從 [Geofabrik](https://download.geofabrik.de/north-america/us/oregon.html) 獲取 Oregon 的 PBF 檔案。

注意：將具有 CDLA Permissive 2.0 許可證的資料與 OSM 進行結合是被允許的，但結果資料可能需要遵循 Open Database License (ODbL) 如果它是一個衍生資料庫。請參閱 [OSM Collective Database Guideline](https://osmfoundation.org/wiki/Licence/Community_Guidelines/Collective_Database_Guideline_Guideline) 瞭解更多訊息。
<details>
    <summary>Query</summary>
<div>
<QueryBuilder query={ConflateOSMQuery}></QueryBuilder>
</div>
</details>
</TabItem>
<TabItem value="Find building addresses" label="Find building addresses" default>
如果您想要將地址資料附加到建築物上。可以查看 [Overture addresses](/schema/reference/addresses/address/) 主題，但我們先假設它沒有涵蓋您要找的區域。

places 主題具有廣泛的覆蓋範圍，許多地點點位特徵都有關聯的地址。通過使用交集，我們可以找到落在建築物內的地點，然後將地點的地址連接到建築物多邊形上。
<details>
    <summary>Query</summary>
<div>
<QueryBuilder query={PlacesInBuildingsQuery}></QueryBuilder>
</div>
</details>
</TabItem>
</Tabs>

## 套件和工具

### Rapid
Rapid 是一個 OpenStreetMap 編輯器，能夠通過參考 [此處的指南](/examples/rapid-id/) 顯示地點資料作為參考圖層。

該授權與 OSM 兼容，這些資料可用於製作地圖。