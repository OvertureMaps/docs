---
title: å½¢ç‹€èˆ‡é€£æ¥æ€§
---

import ThemedImage from '@theme/ThemedImage';
import useBaseUrl from '@docusaurus/useBaseUrl';

# å½¢ç‹€èˆ‡é€£æ¥æ€§

Overture é‹è¼¸ä¸»é¡Œé€šéä¸»é¡Œä¸­çš„å…©ç¨®è¦ç´ é¡å‹ï¼šæ®µè½å’Œé€£æ¥å™¨ä¹‹é–“çš„äº’å‹•ï¼Œæ•æ‰é‹è¼¸ç¶²çµ¡çš„ç‰©ç†å½¢ç‹€å’Œé€£æ¥æ€§ã€‚


<div style={{textAlign: 'center'}}>

<figure>

<ThemedImage
  alt="Three segments physically joined by a connector"
  sources={{
    light: useBaseUrl('/img/transportation/network-light.png'),
    dark: useBaseUrl('/img/transportation/network-dark.png'),
  }}
/>

<figcaption>

*A connector physically joining three segments.*

</figcaption>
</figure>

</div>

## é€£æ¥å™¨

[é€£æ¥å™¨](/schema/reference/transportation/connector)è¦ç´ é¡å‹æ”œå¸¶é»å¹¾ä½•ï¼Œæè¿°äº†å…©å€‹æˆ–å¤šå€‹æ®µè½ä¹‹é–“ç™¼ç”Ÿï¼ˆæˆ–æœªä¾†å¯èƒ½ç™¼ç”Ÿï¼‰ç‰©ç†é€£æ¥çš„ä½ç½®ã€‚

é€£æ¥å™¨é™¤äº†å¹¾ä½•å’Œæ¨™æº–çš„Overtureè¦ç´ å±¬æ€§ä¹‹å¤–ï¼Œæ²’æœ‰å…¶ä»–å±¬æ€§ã€‚é‹è¼¸ä¸»é¡Œçš„æ‰€æœ‰å…¶ä»–æ–¹é¢éƒ½å»ºæ¨¡æ–¼æ®µè½ã€‚

<!--
 æŠ€è¡“ä¸Šä¾†èªªï¼Œé€£æ¥å™¨æ²’æœ‰å…¶ä»–å±¬æ€§çš„èªªæ³•æ˜¯ä¸æ­£ç¢ºçš„ï¼Œå› ç‚ºæˆªè‡³2023-06-15ï¼Œå®ƒå€‘æœ‰ä¸€å€‹ `level` å±¬æ€§ï¼Œå¯èƒ½æ‡‰è©²è¢«ç§»é™¤ï¼šhttps://github.com/OvertureMaps/schema-wg/issues/138
-->

## æ®µè½

[æ®µè½](/schema/reference/transportation/segment)è¦ç´ é¡å‹æ”œå¸¶`LineString`å¹¾ä½•ï¼Œæè¿°äº†é‹è¼¸ç¶²çµ¡ä¸­ä¸€éƒ¨åˆ†çš„ç‰©ç†å½¢ç‹€ã€‚æ®µè½å¯ä»¥ä»£è¡¨å…·æœ‰çœŸå¯¦å­˜åœ¨çš„å¯¦é«”ï¼Œä¾‹å¦‚é‹ªè¨­çš„é“è·¯ï¼›ä¹Ÿå¯ä»¥ä»£è¡¨ç„¡å½¢çš„å¯¦é«”ï¼Œä¾‹å¦‚æ¸¡è¼ªè·¯ç·šï¼Œå®ƒæœ‰ä¸€å€‹çœ¾æ‰€å‘¨çŸ¥çš„å½¢ç‹€ï¼Œä½†åœ¨ç¾å¯¦ä¸–ç•Œä¸­æ²’æœ‰å¯è§€å¯Ÿçš„å­˜åœ¨ã€‚

### ç‰©ç†é€£æ¥æ€§

å¦‚æœæ¯å€‹æ®µè½çš„é€£æ¥å™¨å±¬æ€§åŒ…å«å°é€£æ¥å™¨çš„å¼•ç”¨ï¼Œå‰‡å…©å€‹æˆ–å¤šå€‹æ®µè½åœ¨çµ¦å®šçš„é€£æ¥å™¨è™•ç‰©ç†é€£æ¥ã€‚

é€£æ¥å™¨å¹¾ä½•çš„åº§æ¨™æ‡‰è©²ç›¡å¯èƒ½åŒ…å«åœ¨æ®µè½å¹¾ä½•çš„åº§æ¨™å…§ï¼Œåœ¨é€™ç¨®æƒ…æ³ä¸‹ï¼Œé€£æ¥å™¨åº§æ¨™å®šç¾©äº†ç‰©ç†é€£æ¥é»ã€‚å®˜æ–¹çš„Overtureæ•¸æ“šç™¼å¸ƒå°‡å§‹çµ‚æ»¿è¶³æ­¤ç´„æŸã€‚å¦‚æœç„¡æ³•æ»¿è¶³ï¼Œå‰‡ç‰©ç†é€£æ¥é»æ˜¯èˆ‡é€£æ¥å™¨åº§æ¨™ç›¸äº¤çš„æ®µè½å¹¾ä½•ä¸Šæœ€è¿‘çš„é»ã€‚

ç›¸åï¼Œå¦‚æœå…©å€‹æ®µè½çš„é€£æ¥å™¨å±¬æ€§æœªå¼•ç”¨å…±äº«é€£æ¥å™¨ï¼Œå³ä½¿å®ƒå€‘çš„å¹¾ä½•å½¢ç‹€é‡ç–Šæˆ–å…±äº«å…¬å…±åº§æ¨™ï¼Œå®ƒå€‘ä¹Ÿä¸æœƒè¢«ç‰©ç†é€£æ¥ã€‚

å…è¨±å¾ä¸€å€‹æ®µè½ä¸Šçš„é»åˆ°å¦ä¸€å€‹ç‰©ç†é€£æ¥æ®µè½ä¸Šçš„é»çš„æ—…è¡Œï¼Œé™¤éå—åˆ°æ˜ç¢ºé™åˆ¶ï¼Œå¦‚é€²å…¥æˆ–è½‰å‘é™åˆ¶ã€‚

å®˜æ–¹çš„Overtureé‹è¼¸æ•¸æ“šç™¼å¸ƒä¸­çš„æ‰€æœ‰æ®µè½è‡³å°‘æœ‰å…©å€‹é€£æ¥å™¨ï¼Œä¸€å€‹åœ¨å¹¾ä½•å½¢ç‹€çš„æ¯ç«¯ï¼Œå³ä½¿é€™äº›ç«¯é»é€£æ¥å™¨æœªé™„åŠ åˆ°å…¶ä»–æ®µè½ä¸Šã€‚é€™ä¸æ˜¯å¼·åˆ¶æ€§æœ€ä½è¦æ±‚ï¼Œä¹Ÿä¸ç”±æ¨¡å¼å¼·åˆ¶åŸ·è¡Œã€‚é€™æ¨£åšæ˜¯ç‚ºäº†è®“æ–°æ®µè½èƒ½å¤ é€£æ¥åˆ°ç¾æœ‰ç¶²çµ¡ä¸­ï¼Œè€Œä¸éœ€è¦æ›´æ”¹ç¾æœ‰æ®µè½çš„å±¬æ€§ã€‚

### é–‹å§‹ã€çµæŸå’Œæ–¹å‘

æ®µè½å¹¾ä½•çš„ç¬¬ä¸€å€‹åº§æ¨™æ˜¯æ®µè½çš„é–‹å§‹ï¼Œæœ€å¾Œä¸€å€‹åº§æ¨™æ˜¯çµæŸã€‚æ®µè½çš„æ–¹å‘æ˜¯å¾é–‹å§‹æŒ‡å‘çµæŸã€‚ä»¥ä¸‹ç¤ºä¾‹é¡¯ç¤ºäº†å…©å€‹å…·æœ‰ç›¸åŒåº§æ¨™çš„æ®µè½å¹¾ä½•ï¼Œæ–¹å‘ç›¸åã€‚


<div style={{ width: "49.5%", float: "left" }}>

<figure>

```yaml
type: LineString
coordinates:
  - [1, 0]   # Start
  - [0, 0]
  - [-1, 0]  # End
```

<div style={{textAlign: 'center'}}>

<ThemedImage
  alt="West-oriented segment geometry"
  sources={{
    light: useBaseUrl('/img/transportation/oriented-west-light.svg'),
    dark: useBaseUrl('/img/transportation/oriented-west-dark.svg'),
  }}
/>

</div>

<figcaption>

<div style={{textAlign: 'center'}}>

*This segment geometry is oriented due west.*

</div>

</figcaption>
</figure>

</div>

<div style={{ width: "49.5%", float: "right" }}>

<figure>

```yaml
type: LineString
coordinates:
  - [-1, 0]  # Start
  - [0, 0]
  - [1, 0]   # End
```

<div style={{textAlign: 'center'}}>

<ThemedImage
  alt="East-oriented segment geometry"
  sources={{
    light: useBaseUrl('/img/transportation/oriented-east-light.svg'),
    dark: useBaseUrl('/img/transportation/oriented-east-dark.svg'),
  }}
/>

</div>

<figcaption>

<div style={{textAlign: 'center'}}>

*This segment geometry is oriented due east.*

</div>

</figcaption>
</figure>

</div>

<div style={{ clear: "both" }}/>


### æ–¹å‘

æ²¿è‘—æ®µè½çš„å¹¾ä½•å½¢ç‹€æ—…è¡Œå¯ä»¥éµå¾ªå…©å€‹å¯èƒ½çš„æ–¹å‘ï¼šå‰é€²æˆ–å¾Œé€€ã€‚å‰é€²æ–¹å‘æ˜¯æœå‘æ®µè½çš„çµæŸï¼›è€Œå¾Œé€€æ–¹å‘æ˜¯æœå‘æ®µè½çš„é–‹å§‹ã€‚

<div style={{textAlign: 'center'}}>

<figure>

<ThemedImage
  alt="Travel heading along a segment oriented due east."
  sources={{
    light: useBaseUrl('/img/transportation/heading-light.svg'),
    dark: useBaseUrl('/img/transportation/heading-dark.svg'),
  }}
/>

<figcaption>

*Travel heading along a segment.*

</figcaption>
</figure>

</div>

### Directionality

<!-- TODO: Update this section to align with:

          https://github.com/OvertureMaps/schema-wg/issues/134
-->


ğŸš§ æˆ‘å€‘æ­£åœ¨é–‹ç™¼ä¸€ç¨®æ®µè½ç´šçš„æ–¹å‘æ€§æ¦‚å¿µï¼Œé¡ä¼¼æ–¼ [è»Šé“æ–¹å‘æ€§](/schema/concepts/by-theme/transportation/roads#lane-directionality)ï¼Œä»¥æŒ‡ç¤ºæ®µè½ä¸Šå…è¨±æˆ–ç¦æ­¢çš„æ—…è¡Œæ–¹å‘ã€‚é€™é …å·¥ä½œæ­£åœ¨é€²è¡Œä¸­ï¼Œè«‹ç¨å¾Œå†æŸ¥çœ‹ã€‚

### å­é¡å‹

æ®µè½è¦ç´ æœ‰ä¸€å€‹ `subtype` å±¬æ€§ï¼Œå…¶å€¼æä¾›æœ‰é—œæ®µè½åœ¨é‹è¼¸ç¶²çµ¡ä¸­è§’è‰²çš„æ›´å…·é«”ä¿¡æ¯ã€‚

`subtype` å±¬æ€§å¯èƒ½æ˜¯ `road`ã€`rail` æˆ– `water` å…¶ä¸­ä¹‹ä¸€ï¼Œä½†ç›®å‰åªæœ‰ `road` å®šç¾©å¾—è¼ƒç‚ºæ¸…æ¥šã€‚`road` æ®µè½æ¨¡å‹ä»»ä½•é¡å‹çš„é“è·¯ã€è¡—é“æˆ–å°å¾‘ï¼ŒåŒ…æ‹¬å°ˆç”¨çš„æ­¥è¡Œã€é¨è¡Œç­‰æ´»å‹•çš„è·¯å¾‘ã€‚æ¬²äº†è§£æœ‰é—œ `road` æ®µè½çš„æ›´å¤šä¿¡æ¯ï¼Œè«‹åƒè¦‹ [é“è·¯](/schema/concepts/by-theme/transportation/roads) é é¢ã€‚

### Level (Z-order)

Segment geometry is two-dimensional. In the real, 3D, world, however the
entities represented by segments can be above or below each other, as
may happen with tunnels, bridges, overpasses, and stacked multi-level
highway interchanges. To accurately render top-down 2D maps, it is
important to know the relative stacking order, or Z-order, of segments.

Segment Z-order is given by the `level` property. A `level` value of
`0` indicates visual level, with positive numbers indicating above
visual level, negative numbers indicating below visual level, and in
general, a lesser number indicating a lower position in the stacking
order than a greater number.

<div style={{textAlign: 'center'}}>

<figure>

<ThemedImage
  alt="Level 0 segments stacked above level -1 segments."
  sources={{
    light: useBaseUrl('/img/transportation/level-light.png'),
    dark: useBaseUrl('/img/transportation/level-dark.png'),
  }}
/>

<figcaption>

*Ground level segments stacking above tunnel segments.*

</figcaption>
</figure>

</div>

Note that two segments with different `level` values may be physically
connected, since `level` is an approximation for rendering and is not
meant be a precise indication of elevation at different points along the
segment. Connectors do not have a `level`.

<!--
TODO: The statement that "Connectors do not have a `level`" is not
      accurate as of 2023-06-15, but we have an open issue to fix this:
      https://github.com/OvertureMaps/schema-wg/issues/138. We should
      address the issue and delete this TODO comment afterward.
-->

## Segmentation

The term segmentation describes the process of converting upstream source data
into Overture transportation shape and connectivity data modeled as segments and
connectors.

### Shape stability

A primary goal of Overture's segmentation process is to promote stability of
segment shape across Overture data releases. For example, if a certain
real-world stretch of Main Street is represented by a single segment with
particular geometry in release 1, we will strive to avoid slicing the exact same
geometry up into two, three, or four segments in release 2.

Note that aiming for segment shape stability categorically does not mean that
Overture aims for a stable transportation dataset. On the contrary, we aim to
continuously improve data accuracy and coverage, and expect the transportation
network dataset to constantly evolve and grow as a result. Our goal is simply
to minimize unnecessary, semantically meaningless, changes in how the geometry
is sliced into segments across data releases.

Several features of the transportation theme schema were designed to allow the
segmentation process to achieve its segment stability goal. These features
include:

- [interior connectors](#interior-connectors).
- [geometrically scoped](#geometric-scoping) segment properties.

<!---
TODO: Once we have some usable comparative metrics for ID stability, we should
      add a sub-heading under segmentation, with a table of the data.
--->

### Overture ID stability

Overture pursues shape stability to improve the ability to assess whether two segments from different points in time (or from different upstream data
sources) represent the same real world entity. Overture's success at this assessment directly feeds into the stability and precision of [Overture IDs](https://docs.overturemaps.org/gers) assigned to segments. In turn, higher Overture ID stability and precision makes transportation theme data more useful for conflation.

### Interior connectors

A key feature of the Overture transportation schema which enables shape
stability is the ability of segments to support connectors at interior positions
along their geometry, not only at their endpoints. The ability to add internal
connectors prevents the segmentation process from having to blindly follow every
split or join introduced in upstream source data.

For example, imagine a square city block bordered by road on all four sides has
been mapped in the source data, but a back alley dividing the block along the
east-west axis has not. If the back alley is subsequently mapped in the source
data, the Overture segmentation process can connect to the transportation
network without having to subdivide any existing segments by simply introducing
internal connectors on the north-south road segments bordering the block to the east and west. As a result, the [Overture IDs](https://docs.overturemaps.org/gers) of the north-south road segments remain as they were and no data needs to be re-conflated.

<figure>

<div style={{ width: "50%", float: "left" , textAlign: "center" }}>

<ThemedImage
  alt="A city block without with back alley omitted."
  sources={{
    light: useBaseUrl('/img/transportation/interior-connectors-before-light.png'),
    dark: useBaseUrl('/img/transportation/interior-connectors-before-dark.png'),
  }}
/>

</div>

<div style={{ width: "50%", float: "right", textAlign: "center" }}>

<ThemedImage
  alt="A city block after adding a new back alley segment."
  sources={{
    light: useBaseUrl('/img/transportation/interior-connectors-after-light.png'),
    dark: useBaseUrl('/img/transportation/interior-connectors-after-dark.png'),
  }}
/>

</div>

<div style={{ clear: "both" }}/>

<figcaption>

<div style={{textAlign: 'center'}}>

*A square city block bordered by four roads before (left) and after (right) mapping the back alley using internal connectors.*

</div>

</figcaption>

</figure>

Note that in the above example, an official Overture data release would insert
coordinates in the middle of the north-south segments, if they did not already
exist, because Overture data releases will always ensure that every segment's
geometry includes all of its connectors. From a computer's perspective, this is
a very minor alteration of the segment's shape.

### Geometric scoping

Many segment properties may include a linear reference so that they apply only
to a part of the segment geometry. We refer to these linearly-referenced
property values as being geometrically scoped and discuss geometric scoping at greater length in the page on [scoped properties](/schema/concepts/scoping-rules).

Geometric scoping allows the segmentation algorithm to avoid introducing
segment splits simply because a certain property has different values along
different parts of the geometry. Like interior connectors, geometrically-scoped
properties enable the segmentation process to make decisions that promote shape
stability, ultimately resulting in more precise and stable [Overture IDs](https://docs.overturemaps.org/gers) and less churn in conflated data.

<div style={{textAlign: 'center'}}>

<figure>

<ThemedImage
  alt="A single segment with a geometrically-scoped speed limit"
  sources={{
    light: useBaseUrl('/img/transportation/geometrically-scoped-speed-limit-light.png'),
    dark: useBaseUrl('/img/transportation/geometrically-scoped-speed-limit-dark.png'),
  }}
/>

<figcaption>

*A single segment with multiple geometrically-scoped speed limit values.*

</figcaption>
</figure>

</div>

### Loops

Although it is technically possible to use the Overture schema to express a
segment forming a connected loop, such loops are considered invalid and will
never be produced by the segmentation algorithm.

An illegal loop where one of a segment connects to the other end can be
corrected by splitting the segment and introducing a second connector to
maintain physical connectivity. An illegal self-crossing loop of degree *N*
can be corrected by splitting the segment into N pieces.

<div style={{ width: "49.5%", float: "left", textAlign: "center" }}>

<figure>

<div style={{width: "50%", float: "left"}}>

<ThemedImage
  alt="Illegal circular loop."
  sources={{
    light: useBaseUrl('/img/transportation/circle-looped-light.png'),
    dark: useBaseUrl('/img/transportation/circle-looped-dark.png'),
  }}
/>

</div>

<div style={{width: "50%", float: "left"}}>

<ThemedImage
  alt="One possible correction for illegal circular loop."
  sources={{
    light: useBaseUrl('/img/transportation/circle-unlooped-light.png'),
    dark: useBaseUrl('/img/transportation/circle-unlooped-dark.png'),
  }}
/>

</div>

<div style={{clear: "both"}}/>

<figcaption>

<div style={{textAlign: 'center'}}>

*An illegal loop connected at its endpoints (left) and a possible correction (right).*

</div>

</figcaption>
</figure>

</div>

<div style={{ width: "49.5%", float: "right", textAlign: "center" }}>

<figure>

<div style={{width: "50%", float: "left"}}>

<ThemedImage
  alt="Illegal self-crossing loop."
  sources={{
    light: useBaseUrl('/img/transportation/crossing-looped-light.png'),
    dark: useBaseUrl('/img/transportation/crossing-looped-dark.png'),
  }}
/>

</div>

<div style={{width: "50%", float: "left"}}>

<ThemedImage
  alt="One possible correction to self-crossing loop."
  sources={{
    light: useBaseUrl('/img/transportation/crossing-unlooped-light.png'),
    dark: useBaseUrl('/img/transportation/crossing-unlooped-dark.png'),
  }}
/>

</div>

<div style={{clear: "both"}}/>

<figcaption>

<div style={{textAlign: 'center'}}>

*An illegal self-crossing loop (left) and a possible correction (right).*

</div>

</figcaption>
</figure>

</div>

<div style={{ clear: "both" }}/>
