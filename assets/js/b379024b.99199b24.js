"use strict";(self.webpackChunkoverture_documentation=self.webpackChunkoverture_documentation||[]).push([[6234],{7788:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>h,contentTitle:()=>c,default:()=>j,frontMatter:()=>o,metadata:()=>n,toc:()=>x});let n=JSON.parse('{"id":"guides/transportation","title":"Transportation","description":"Overview","source":"@site/docs/guides/transportation.mdx","sourceDirName":"guides","slug":"/guides/transportation","permalink":"/guides/transportation","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1736265808000,"frontMatter":{"title":"Transportation"},"sidebar":"docs","previous":{"title":"Places","permalink":"/guides/places"},"next":{"title":"Global Entity Reference System (GERS)","permalink":"/gers"}}');var s=r(74848),i=r(28453),d=r(74235),a=r(15947),l=r(48821);r(87287);let o={title:"Transportation"},c=void 0,h={},x=[{value:"Overview",id:"overview",level:2},{value:"Dataset description",id:"dataset-description",level:2},{value:"Subtypes",id:"subtypes",level:3},{value:"Data access and retrieval",id:"data-access-and-retrieval",level:2},{value:"Data usage guidelines",id:"data-usage-guidelines",level:2},{value:"Data manipulation and analysis",id:"data-manipulation-and-analysis",level:2},{value:"Querying by properties in DuckDB",id:"querying-by-properties-in-duckdb",level:3},{value:"Querying by properties in Athena",id:"querying-by-properties-in-athena",level:3},{value:"Tools and libraries",id:"tools-and-libraries",level:2},{value:"transportation-splitter",id:"transportation-splitter",level:3},{value:"Splitter Example",id:"splitter-example",level:4},{value:"More Information and Feedback",id:"more-information-and-feedback",level:4}];function u(e){let t={a:"a",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components},{Details:n}=t;return n||function(e,t){throw Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n","\n",(0,s.jsxs)(t.p,{children:["The Overture transportation theme is the collection of LineString and Point features that describe the infrastructure and conventions of how people and objects travel around the world. The dataset contains two features types: ",(0,s.jsx)(t.code,{children:"connector"})," and ",(0,s.jsx)(t.code,{children:"segment"}),". The three subtypes within ",(0,s.jsx)(t.code,{children:"segment"})," -- ",(0,s.jsx)(t.code,{children:"road"}),", ",(0,s.jsx)(t.code,{children:"rail"}),", and ",(0,s.jsx)(t.code,{children:"water"})," -- contain familiar categories of transportation data: highways, footways, cycleways, railways, ferry routes, and public transportation."]}),"\n",(0,s.jsxs)(t.p,{children:["Most of the data in the transportation theme is sourced from OpenStreetMap. In the ",(0,s.jsx)(t.code,{children:"2024-09-18.0"})," ",(0,s.jsx)(t.a,{href:"/release",children:"release"}),", we began adding data from TomTom to improve coverage in key areas."]}),"\n",(0,s.jsx)(t.p,{children:"You might use the Overture transportation data for:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"mapping:"})," rendering a map of connected roads and paths."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"routing:"})," calculating optimal routes from place to place."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"navigation:"})," generating granular instructions on the maneuvers needed to\nfollow a route."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"analytics:"})," transportation-related analysis including traffic safety\nanalysis and disaster planning."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"geocoding:"})," getting the coordinates of street intersections (geocodes) or\nthe street intersection near specific coordinates (reverse geocodes)."]}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["This guide is an overview of the transportation data. To dig into the details of the schema, see the ",(0,s.jsx)(t.a,{href:"/schema/concepts/by-theme/transportation",children:"schema concepts for transportation"})," and the reference documentation for the ",(0,s.jsx)(t.a,{href:"/schema/reference/transportation/segment",children:"segment"})," and ",(0,s.jsx)(t.a,{href:"/schema/reference/transportation/connector",children:"connector"})," feature types."]}),"\n",(0,s.jsx)(t.h2,{id:"dataset-description",children:"Dataset description"}),"\n",(0,s.jsx)(t.p,{children:"All Overture data, including transportation data, is distributed as GeoParquet, a column-based data structure. Below you'll find a table with column-by-column descriptions of the properties in the transportation feature type."}),"\n",(0,s.jsxs)(n,{children:[(0,s.jsx)("summary",{children:"Schema for GeoParquet files in the transportation theme"}),(0,s.jsx)("div",{children:(0,s.jsxs)(d.default,{children:[(0,s.jsx)(a.default,{value:"segment",label:"segment",default:!0,children:(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"column_name"}),(0,s.jsx)(t.th,{children:"column_type"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"id"}),(0,s.jsx)(t.td,{children:"VARCHAR"}),(0,s.jsx)(t.td,{children:"A feature ID. This may be an ID associated with the Global Entity Reference System (GERS) if\u2014and-only-if the feature represents an entity that is part of GERS."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"geometry"}),(0,s.jsx)(t.td,{children:"WKB"}),(0,s.jsx)(t.td,{children:"The line representation of the segment's location. Segment's geometry which MUST be a LineSting as defined by GeoJSON schema."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"bbox"}),(0,s.jsx)(t.td,{children:"STRUCT"}),(0,s.jsx)(t.td,{children:"Area defined by two longitudes and two latitudes: latitude is a decimal number between -90.0 and 90.0; longitude is a decimal number between -180.0 and 180.0."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"version"}),(0,s.jsx)(t.td,{children:"INTEGER"}),(0,s.jsx)(t.td,{children:"Version number of the feature, incremented in each Overture release where the geometry or attributes of this feature changed."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"sources"}),(0,s.jsx)(t.td,{children:"STRUCT[]"}),(0,s.jsx)(t.td,{children:"The array of source information for the properties of a given feature, with each entry being a source object which lists the property in JSON Pointer notation and the dataset that specific value came from. All features must have a root level source which is the default source if a specific property's source is not specified."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"subtype"}),(0,s.jsx)(t.td,{children:"VARCHAR"}),(0,s.jsx)(t.td,{children:"The broad category of transportation segment."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"class"}),(0,s.jsx)(t.td,{children:"VARCHAR"}),(0,s.jsx)(t.td,{children:"Captures the kind of road and its position in the road network hierarchy."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"subclass"}),(0,s.jsx)(t.td,{children:"VARCHAR"}),(0,s.jsx)(t.td,{children:"Specifies the usage of a length of road."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"subclass_rules"}),(0,s.jsx)(t.td,{children:"STRUCT[]"}),(0,s.jsx)(t.td,{children:"Defines the portion of a road that the subclass applies to."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"names"}),(0,s.jsx)(t.td,{children:"STRUCT[]"}),(0,s.jsx)(t.td,{children:"Properties defining the names of a feature."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"connectors"}),(0,s.jsx)(t.td,{children:"STRUCT[]"}),(0,s.jsx)(t.td,{children:"Array of connector IDs identifying the connectors this segment is physically connected to linearly referenced with their location. Each connector is a possible routing decision point, meaning it defines a place along the segment in which there is possibility to transition to other segments which share the same connector."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"routes"}),(0,s.jsx)(t.td,{children:"STRUCT[]"}),(0,s.jsx)(t.td,{children:"Routes this segment belongs to."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"access_restrictions"}),(0,s.jsx)(t.td,{children:"STRUCT[]"}),(0,s.jsx)(t.td,{children:"Rules governing access to this road segment or lane."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"level_rules"}),(0,s.jsx)(t.td,{children:"STRUCT[]"}),(0,s.jsx)(t.td,{children:"Defines the Z-order, i.e. stacking order, of the road segment."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"prohibited_transitions"}),(0,s.jsx)(t.td,{children:"STRUCT[]"}),(0,s.jsx)(t.td,{children:"Defines where traveling from the segment to another is disallowed for navigation. This covers things situations prohibited turns or a transition from road to bike lane disallowing cars."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"road_surface"}),(0,s.jsx)(t.td,{children:"STRUCT[]"}),(0,s.jsx)(t.td,{children:"Defines the surface material on a road such as paved, asphalt, or unpaved."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"road_flags"}),(0,s.jsx)(t.td,{children:"STRUCT[]"}),(0,s.jsx)(t.td,{children:"Additional properties relevant to roads such as is_bridge or is_under_construction."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"speed_limits"}),(0,s.jsx)(t.td,{children:"STRUCT[]"}),(0,s.jsx)(t.td,{children:"Defines the speed limit of the road segment."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"width_rules"}),(0,s.jsx)(t.td,{children:"STRUCT[]"}),(0,s.jsx)(t.td,{children:"Defines the width of the road segment for rendering."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"destinations"}),(0,s.jsx)(t.td,{children:"STRUCT[]"}),(0,s.jsx)(t.td,{children:"Describes the transitions from one segment to another on the way to a specified location. This data is primarily used for routing."})]})]})]})}),(0,s.jsx)(a.default,{value:"connector",label:"connector",default:!0,children:(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"column_name"}),(0,s.jsx)(t.th,{children:"column_type"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"id"}),(0,s.jsx)(t.td,{children:"VARCHAR"}),(0,s.jsx)(t.td,{children:"A feature ID. This may be an ID associated with the Global Entity Reference System (GERS) if\u2014and-only-if the feature represents an entity that is part of GERS."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"geometry"}),(0,s.jsx)(t.td,{children:"BLOB"}),(0,s.jsx)(t.td,{children:"The line representation of the segment's location. Segment's geometry which MUST be a LineSting as defined by GeoJSON schema."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"bbox"}),(0,s.jsx)(t.td,{children:"STRUCT"}),(0,s.jsx)(t.td,{children:"Area defined by two longitudes and two latitudes: latitude is a decimal number between -90.0 and 90.0; longitude is a decimal number between -180.0 and 180.0."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"version"}),(0,s.jsx)(t.td,{children:"INTEGER"}),(0,s.jsx)(t.td,{children:"Version number of the feature, incremented in each Overture release where the geometry or attributes of this feature changed."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"sources"}),(0,s.jsx)(t.td,{children:"STRUCT[]"}),(0,s.jsx)(t.td,{children:"The array of source information for the properties of a given feature, with each entry being a source object which lists the property in JSON Pointer notation and the dataset that specific value came from. All features must have a root level source which is the default source if a specific property's source is not specified."})]})]})]})})]})})]}),"\n",(0,s.jsx)(t.h3,{id:"subtypes",children:"Subtypes"}),"\n",(0,s.jsxs)(t.p,{children:["Transportation segments are divided into three subtypes: ",(0,s.jsx)(t.strong,{children:"rail"}),", ",(0,s.jsx)(t.strong,{children:"water"}),", and ",(0,s.jsx)(t.strong,{children:"road"}),". The road subtype is then further divided into a variety of different classes based on usage captured in the table below."]}),"\n",(0,s.jsxs)(n,{children:[(0,s.jsx)("summary",{children:"Class and subclass feature counts"}),(0,s.jsx)("div",{children:(0,s.jsx)(d.default,{children:(0,s.jsx)(a.default,{value:"classes",label:"classes",default:!0,children:(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"subtype"}),(0,s.jsx)(t.th,{children:"class"}),(0,s.jsx)(t.th,{children:"subclass"}),(0,s.jsx)(t.th,{children:"Feature count, December 2024 release"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"rail"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"1,585,021"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"road"}),(0,s.jsx)(t.td,{children:"bridleway"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"96,542"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"road"}),(0,s.jsx)(t.td,{children:"cycleway"}),(0,s.jsx)(t.td,{children:"cycle_crossing"}),(0,s.jsx)(t.td,{children:"49,372"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"road"}),(0,s.jsx)(t.td,{children:"cycleway"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"1,216,888"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"road"}),(0,s.jsx)(t.td,{children:"footway"}),(0,s.jsx)(t.td,{children:"crosswalk"}),(0,s.jsx)(t.td,{children:"1,921,434"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"road"}),(0,s.jsx)(t.td,{children:"footway"}),(0,s.jsx)(t.td,{children:"sidewalk"}),(0,s.jsx)(t.td,{children:"3,083,616"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"road"}),(0,s.jsx)(t.td,{children:"footway"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"14,834,696"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"road"}),(0,s.jsx)(t.td,{children:"living_street"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"3,198,724"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"road"}),(0,s.jsx)(t.td,{children:"motorway"}),(0,s.jsx)(t.td,{children:"link"}),(0,s.jsx)(t.td,{children:"632,849"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"road"}),(0,s.jsx)(t.td,{children:"motorway"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"432,631"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"road"}),(0,s.jsx)(t.td,{children:"path"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"12,900,432"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"road"}),(0,s.jsx)(t.td,{children:"pedestrian"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"451,802"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"road"}),(0,s.jsx)(t.td,{children:"primary"}),(0,s.jsx)(t.td,{children:"link"}),(0,s.jsx)(t.td,{children:"472,117"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"road"}),(0,s.jsx)(t.td,{children:"primary"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"6,550,752"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"road"}),(0,s.jsx)(t.td,{children:"residential"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"124,232,135"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"road"}),(0,s.jsx)(t.td,{children:"secondary"}),(0,s.jsx)(t.td,{children:"link"}),(0,s.jsx)(t.td,{children:"373,041"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"road"}),(0,s.jsx)(t.td,{children:"secondary"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"10,510,403"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"road"}),(0,s.jsx)(t.td,{children:"service"}),(0,s.jsx)(t.td,{children:"alley"}),(0,s.jsx)(t.td,{children:"1,570,311"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"road"}),(0,s.jsx)(t.td,{children:"service"}),(0,s.jsx)(t.td,{children:"driveway"}),(0,s.jsx)(t.td,{children:"15,530,080"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"road"}),(0,s.jsx)(t.td,{children:"service"}),(0,s.jsx)(t.td,{children:"parking_aisle"}),(0,s.jsx)(t.td,{children:"6,056,973"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"road"}),(0,s.jsx)(t.td,{children:"service"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"31,950,899"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"road"}),(0,s.jsx)(t.td,{children:"steps"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"1,722,268"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"road"}),(0,s.jsx)(t.td,{children:"tertiary"}),(0,s.jsx)(t.td,{children:"link"}),(0,s.jsx)(t.td,{children:"285,295"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"road"}),(0,s.jsx)(t.td,{children:"tertiary"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"19,321,726"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"road"}),(0,s.jsx)(t.td,{children:"track"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"24,295,660"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"road"}),(0,s.jsx)(t.td,{children:"trunk"}),(0,s.jsx)(t.td,{children:"link"}),(0,s.jsx)(t.td,{children:"533,676"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"road"}),(0,s.jsx)(t.td,{children:"trunk"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"3,361,208"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"road"}),(0,s.jsx)(t.td,{children:"unclassified"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"28,941,961"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"road"}),(0,s.jsx)(t.td,{children:"unknown"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"643,409"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"water"}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{}),(0,s.jsx)(t.td,{children:"27,381"})]})]})]})})})})]}),"\n",(0,s.jsx)(t.h2,{id:"data-access-and-retrieval",children:"Data access and retrieval"}),"\n",(0,s.jsx)(t.p,{children:"The latest transportation data can be obtained from AWS or Azure as GeoParquet files at the following locations."}),"\n",(0,s.jsxs)(d.default,{children:[(0,s.jsx)(a.default,{value:"segment_url",label:"Segment",default:!0,children:(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Provider"}),(0,s.jsx)(t.th,{children:"Location"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Amazon S3"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(l.A,{query:"s3://overturemaps-us-west-2/release/__OVERTURE_RELEASE/theme=transportation/type=segment/",language:"text"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Azure Blob Storage"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(l.A,{query:"https://overturemapswestus2.blob.core.windows.net/release/__OVERTURE_RELEASE/theme=transportation/type=segment/",language:"text"})})]})]})]})}),(0,s.jsx)(a.default,{value:"connector_url",label:"Connector",default:!0,children:(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Provider"}),(0,s.jsx)(t.th,{children:"Location"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Amazon S3"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(l.A,{query:"s3://overturemaps-us-west-2/release/__OVERTURE_RELEASE/theme=transportation/type=connector/",language:"text"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Azure Blob Storage"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(l.A,{query:"https://overturemapswestus2.blob.core.windows.net/release/__OVERTURE_RELEASE/theme=transportation/type=connector/",language:"text"})})]})]})]})})]}),"\n",(0,s.jsx)(t.h2,{id:"data-usage-guidelines",children:"Data usage guidelines"}),"\n",(0,s.jsx)(t.p,{children:"We recommend downloading only the Overture data you need. If you have a particular geographic area of interest, there are several options for using a simple bounding box to extract places data and output a GeoJSON file."}),"\n",(0,s.jsxs)(d.default,{children:[(0,s.jsxs)(a.default,{value:"Python Command-line Tool",label:"Python Command-line Tool",default:!0,children:[(0,s.jsxs)(t.p,{children:["First, follow the ",(0,s.jsx)(t.a,{href:"/getting-data/overturemaps-py/",children:"setup guide for the Python Command-line Tool"}),"."]}),(0,s.jsxs)(t.p,{children:["Set type to either ",(0,s.jsx)(t.code,{children:"segment"})," or ",(0,s.jsx)(t.code,{children:"connector"})," and simply alter the ",(0,s.jsx)(t.code,{children:"bbox"})," value to download a particular area."]}),(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{children:"overturemaps download --bbox=12.46,41.89,12.48,41.91 -f geojson --type=segment -o rome_segments.geojson\n"})})]}),(0,s.jsxs)(a.default,{value:"DuckDB",label:"DuckDB",default:!0,children:[(0,s.jsxs)(t.p,{children:["First, follow the ",(0,s.jsx)(t.a,{href:"/getting-data/duckdb/",children:"setup guide for DuckDB"}),"."]}),(0,s.jsxs)(t.p,{children:["Set the parquet link to either the ",(0,s.jsx)(t.strong,{children:"connector"})," or ",(0,s.jsx)(t.strong,{children:"segment"})," url depending on your needs."]}),(0,s.jsxs)(t.p,{children:["Replace the ",(0,s.jsx)(t.code,{children:"bbox.xmin"})," and ",(0,s.jsx)(t.code,{children:"bbox.ymin"})," values with a new bounding box to run the query for a different area."]}),(0,s.jsx)(l.A,{query:"LOAD spatial; -- noqa\nLOAD httpfs;  -- noqa\n-- Access the data on AWS in this example\nSET s3_region='us-west-2';\n\nCOPY (\nSELECT\n    *\nFROM read_parquet('s3://overturemaps-us-west-2/release/__OVERTURE_RELEASE/theme=transportation/type=segment/*')\nWHERE\n    bbox.xmin > 12.46 AND bbox.xmax < 12.48 AND\n    bbox.ymin > 41.89 AND bbox.ymax < 41.91\n)\nTO 'rome_segments.parquet';\n"})]})]}),"\n",(0,s.jsx)(t.h2,{id:"data-manipulation-and-analysis",children:"Data manipulation and analysis"}),"\n",(0,s.jsx)(t.h3,{id:"querying-by-properties-in-duckdb",children:"Querying by properties in DuckDB"}),"\n",(0,s.jsx)(t.p,{children:"These examples use data properties to filter the data in useful ways using DuckDB."}),"\n",(0,s.jsxs)(d.default,{children:[(0,s.jsxs)(a.default,{value:"Query by class",label:"Query by class",default:!0,children:[(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"class"})," column can be used to pull out subsets of the road data. Similarly, you could use subtype to select only water, rail, or road features. This example extracts only the ",(0,s.jsx)(t.strong,{children:"parking_aisle"})," features within the bounding box."]}),(0,s.jsx)(l.A,{query:"LOAD spatial; -- noqa\nLOAD httpfs;  -- noqa\n-- Access the data on AWS in this example\nSET s3_region='us-west-2';\n\nCOPY (\nSELECT\n    *\nFROM read_parquet('s3://overturemaps-us-west-2/release/__OVERTURE_RELEASE/theme=transportation/type=segment/*')\nWHERE\n    class = 'parking_aisle' AND\n    bbox.xmin > 13.0897 AND bbox.xmax < 13.6976 AND\n    bbox.ymin > 52.3100 AND bbox.ymax < 52.7086\n)\nTO 'berlin_parking_aisles.parquet';\n"})]}),(0,s.jsxs)(a.default,{value:"Query by routes",label:"Query by routes",default:!0,children:[(0,s.jsxs)(t.p,{children:["You might be interested in a network of roads, such as a US Interstate. These can be extracted using the ",(0,s.jsx)(t.code,{children:"routes"})," column and either using the ",(0,s.jsx)(t.code,{children:"network"})," and ",(0,s.jsx)(t.code,{children:"ref"})," properties and/or the ",(0,s.jsx)(t.code,{children:"wikidata"})," column to identify the route."]}),(0,s.jsxs)(t.p,{children:["This example extracts all the roads that are part of US I-5. To get all US Interstates simply remove ",(0,s.jsx)(t.code,{children:"AND routes[1].ref = '5'"})," from the query."]}),(0,s.jsx)(l.A,{query:"LOAD spatial; -- noqa\nLOAD httpfs;  -- noqa\n-- Access the data on AWS in this example\nSET s3_region='us-west-2';\n\nCOPY (\nSELECT\n    *\nFROM read_parquet('s3://overturemaps-us-west-2/release/__OVERTURE_RELEASE/theme=transportation/type=segment/*')\nWHERE\n    routes[1].network = 'US:I'\n    AND routes[1].ref = '5'\n)\nTO 'US_I_5.parquet';\n"})]})]}),"\n",(0,s.jsx)(t.h3,{id:"querying-by-properties-in-athena",children:"Querying by properties in Athena"}),"\n",(0,s.jsx)(t.p,{children:"Athena can allow for faster querying of the transportation layer than DuckDB given the size of the data. These examples are designed for Athena, but could be reworked for DuckDB with some tweaking."}),"\n",(0,s.jsxs)(d.default,{children:[(0,s.jsxs)(a.default,{value:"Query by speed limit",label:"Query by speed limit",default:!0,children:[(0,s.jsxs)(t.p,{children:["To properly return a linear referenced feature like a speed limit, we will need to query all the possible values of the feature as the queried value may only exist on one portion of the line. In this example, we're extracting roads with any speed limit ",(0,s.jsx)(t.code,{children:"max_speed"})," value of ",(0,s.jsx)(t.strong,{children:"27"})," and unit of ",(0,s.jsx)(t.strong,{children:"mph"})," using the any_match function."]}),(0,s.jsxs)(t.p,{children:["This same general query would also work for querying other similar columns such as ",(0,s.jsx)(t.code,{children:"prohibited_transitions"})," and ",(0,s.jsx)(t.code,{children:"access_restrictions"}),"."]}),(0,s.jsx)(l.A,{query:"SELECT\n    id,\n    speed_limits,\n    ST_GEOMFROMBINARY(geometry) AS geometry\nFROM __ATHENA_OVERTURE_RELEASE\nWHERE type = 'segment'\n    AND ANY_MATCH(\n        speed_limits,\n        speed_limit->speed_limit.max_speed.value = 27\n        AND speed_limit.max_speed.unit = 'mph'\n	)\n"})]}),(0,s.jsxs)(a.default,{value:"Select connecting segments",label:"Select connecting segments",default:!0,children:[(0,s.jsxs)(t.p,{children:["With the ",(0,s.jsx)(t.code,{children:"connectors"})," column it is simple to query for all features that connect with a particular segment without the need for a spatial query."]}),(0,s.jsx)(t.p,{children:"This example selects all the segments that that connect to the example id."}),(0,s.jsx)(l.A,{query:"WITH input AS (\n	SELECT id AS input_id,\n		connector_id\n	FROM __ATHENA_OVERTURE_RELEASE\n		CROSS JOIN UNNEST(connectors) AS t(connector)\n	WHERE type = 'segment'\n		AND id = '08628d5437ffffff0473ffc36df547db'\n)\nSELECT\n    *,\n	ST_GEOMFROMBINARY(geometry) AS geometry\nFROM __ATHENA_OVERTURE_RELEASE,\n	input\nWHERE type = 'segment'\n	AND id != input_id\n	AND ANY_MATCH(\n		connectors,\n		connector->connector.connector_id = input.connector_id\n	)\n"})]})]}),"\n",(0,s.jsx)(t.h2,{id:"tools-and-libraries",children:"Tools and libraries"}),"\n",(0,s.jsx)(t.h3,{id:"transportation-splitter",children:"transportation-splitter"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{alt:"Overture Splitter",src:r(13567).A+""})})})}),(0,s.jsx)(t.tbody,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.em,{children:"Conceptual diagram of the splitter tool output. The numbers following 1234@ represent start_lr and end_lr values."})})})})]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.a,{href:"https://github.com/OvertureMaps/transportation-splitter",children:"transportation-spitter tool"})," transforms Overture road data into simpler sub segments. It will optionally divide features at each connector point and at each change of a ",(0,s.jsx)(t.a,{href:"/schema/concepts/scoping-rules/",children:"scoped based property"}),", depending on configuration. Depending on your needs and map stack, the resulting dataset may be easier to manipulate than the original Overture data as each segment will only have connections at either end and have one set of properties for its entire length."]}),"\n",(0,s.jsxs)(t.p,{children:["Since a GERS ID will no longer be unique with this output, the resulting data will have two additional columns: ",(0,s.jsx)(t.code,{children:"start_lr"})," and ",(0,s.jsx)(t.code,{children:"end_lr"})," which are linear references describing which section of the orginal feature this new segment comes from."]}),"\n",(0,s.jsx)(t.h4,{id:"splitter-example",children:"Splitter Example"}),"\n",(0,s.jsx)(t.p,{children:"To help visualize this process better, here is a real world example of a residential street in OpenStreetMap, Overture, and after being run through the splitter tool."}),"\n",(0,s.jsxs)(d.default,{children:[(0,s.jsx)(a.default,{value:"OpenStreetMap",label:"OpenStreetMap",default:!0,children:(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{alt:"OpenStreetMap Splitter Example",src:r(83671).A+"",width:"400",height:"648"})})})}),(0,s.jsx)(t.tbody,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"In OpenStreetMap this residential road is represented by two different features with the same tags with feature 1 having an additional restricted access tag."})})})]})}),(0,s.jsx)(a.default,{value:"Overture",label:"Overture",default:!0,children:(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{alt:"Overture Splitter Example",src:r(54534).A+"",width:"400",height:"648"})})})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsx)(t.tr,{children:(0,s.jsxs)(t.td,{style:{textAlign:"center"},children:["In Overture the two segments have been combined into one feature and the restricted access tag has been stored as this linear reference in ",(0,s.jsx)(t.strong,{children:"access_restrictions"}),":"]})}),(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:(0,s.jsx)(t.code,{children:"[{'access_type': allowed, 'when': {'during': NULL, 'heading': NULL, 'using': NULL, 'recognized': [as_private], 'mode': NULL, 'vehicle': NULL}, 'between': [0.521962729, 1.0]}]"})})})]})]})}),(0,s.jsx)(a.default,{value:"Transportation Splitter",label:"Transportation Splitter",default:!0,children:(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.th,{style:{textAlign:"center"},children:(0,s.jsx)(t.img,{alt:"Splitter Output Example",src:r(47797).A+"",width:"400",height:"648"})})})}),(0,s.jsx)(t.tbody,{children:(0,s.jsx)(t.tr,{children:(0,s.jsx)(t.td,{style:{textAlign:"center"},children:"The splitter has sliced the Overture feature at each connector point for the driveways as well as at the point where the access restriction begins. This results in six unique features in the output all still sharing the same GERS ID."})})})]})})]}),"\n",(0,s.jsx)(t.h4,{id:"more-information-and-feedback",children:"More Information and Feedback"}),"\n",(0,s.jsxs)(t.p,{children:["The tool requires a Spark environment to run and has been tested using Azure Databricks and AWS Glue. For set up information the ",(0,s.jsx)(t.a,{href:"https://github.com/OvertureMaps/transportation-splitter",children:"transportation-spitter GitHub"})," will contain the most up to date information as the tool is in active development still."]}),"\n",(0,s.jsxs)(t.p,{children:["If you have feedback, questions, etc. on the tool you can create an ",(0,s.jsx)(t.a,{href:"https://github.com/OvertureMaps/transportation-splitter/issues",children:"issue"})," on the GitHub."]})]})}function j(e={}){let{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}},87287:(e,t,r)=>{r.d(t,{A:()=>g});var n=r(74848);r(96540);var s=r(18215),i=r(37960),d=r(28618),a=r(83477),l=r(11410),o=r(15418),c=r(61917);let h={cardContainer:"cardContainer_fWXF",cardTitle:"cardTitle_rnsV",cardDescription:"cardDescription_PWke"};function x(e){let{href:t,children:r}=e;return(0,n.jsx)(d.A,{href:t,className:(0,s.A)("card padding--lg",h.cardContainer),children:r})}function u(e){let{href:t,icon:r,title:i,description:d}=e;return(0,n.jsxs)(x,{href:t,children:[(0,n.jsxs)(c.A,{as:"h2",className:(0,s.A)("text--truncate",h.cardTitle),title:i,children:[r," ",i]}),d&&(0,n.jsx)("p",{className:(0,s.A)("text--truncate",h.cardDescription),title:d,children:d})]})}function j(e){let{item:t}=e,r=(0,i.Nr)(t),s=function(){let{selectMessage:e}=(0,a.W)();return t=>e(t,(0,o.translate)({message:"1 item|{count} items",id:"theme.docs.DocCard.categoryDescription.plurals",description:"The default description for a category card in the generated index about how many items this category includes"},{count:t}))}();return r?(0,n.jsx)(u,{href:r,icon:"\uD83D\uDDC3\uFE0F",title:t.label,description:t.description??s(t.items.length)}):null}function p(e){let{item:t}=e,r=(0,l.A)(t.href)?"\u{1F4C4}\uFE0F":"\u{1F517}",s=(0,i.cC)(t.docId??void 0);return(0,n.jsx)(u,{href:t.href,icon:r,title:t.label,description:t.description??s?.description})}function m(e){let{item:t}=e;switch(t.type){case"link":return(0,n.jsx)(p,{item:t});case"category":return(0,n.jsx)(j,{item:t});default:throw Error(`unknown item type ${JSON.stringify(t)}`)}}function f(e){let{className:t}=e,r=(0,i.$S)();return(0,n.jsx)(g,{items:r.items,className:t})}function g(e){let{items:t,className:r}=e;if(!t)return(0,n.jsx)(f,{...e});let d=(0,i.d1)(t);return(0,n.jsx)("section",{className:(0,s.A)("row",r),children:d.map((e,t)=>(0,n.jsx)("article",{className:"col col--6 margin-bottom--lg",children:(0,n.jsx)(m,{item:e})},t))})}},83477:(e,t,r)=>{r.d(t,{W:()=>l});var n=r(96540),s=r(90062);let i=["zero","one","two","few","many","other"];function d(e){return i.filter(t=>e.includes(t))}let a={locale:"en",pluralForms:d(["one","other"]),select:e=>1===e?"one":"other"};function l(){let e=function(){let{i18n:{currentLocale:e}}=(0,s.A)();return(0,n.useMemo)(()=>{try{return function(e){let t=new Intl.PluralRules(e);return{locale:e,pluralForms:d(t.resolvedOptions().pluralCategories),select:e=>t.select(e)}}(e)}catch(t){return console.error(`Failed to use Intl.PluralRules for locale "${e}".
Docusaurus will fallback to the default (English) implementation.
Error: ${t.message}
`),a}},[e])}();return{selectMessage:(t,r)=>(function(e,t,r){let n=e.split("|");if(1===n.length)return n[0];n.length>r.pluralForms.length&&console.error(`For locale=${r.locale}, a maximum of ${r.pluralForms.length} plural forms are expected (${r.pluralForms.join(",")}), but the message contains ${n.length}: ${e}`);let s=r.select(t);return n[Math.min(r.pluralForms.indexOf(s),n.length-1)]})(r,t,e)}}},48821:(e,t,r)=>{r.d(t,{A:()=>d});var n=r(74848),s=r(76634),i=r(90062);function d(e){let{siteConfig:{customFields:t}}=(0,i.A)();var r=e.query.replace("__OVERTURE_RELEASE",t.overtureRelease);r=(r=r.replace("__ATHENA_OVERTURE_RELEASE","v"+t.overtureRelease.replaceAll(".","_").replaceAll("-","_"))).replace("__PMTILES_OVERTURE_RELEASE",t.overtureRelease.split(".",1));var d=e.language||"sql";return(0,n.jsx)(s.default,{language:d,title:e.title,children:r})}},13567:(e,t,r)=>{r.d(t,{A:()=>n});let n=r.p+"assets/images/splitter_concept-196b066564f30ea229fd3a2355221e8f.svg"},83671:(e,t,r)=>{r.d(t,{A:()=>n});let n=r.p+"assets/images/splitter_osm-ec5ca1f146732041f17c709575789187.png"},47797:(e,t,r)=>{r.d(t,{A:()=>n});let n=r.p+"assets/images/splitter_output-93956dae4221c80c88df5c0d43819acd.png"},54534:(e,t,r)=>{r.d(t,{A:()=>n});let n=r.p+"assets/images/splitter_overture-d8d4cefd5b91b54e0e43861b1c851baf.png"}}]);