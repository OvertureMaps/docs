"use strict";(self.webpackChunkoverture_documentation=self.webpackChunkoverture_documentation||[]).push([[6124],{20883:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>h,contentTitle:()=>o,default:()=>g,frontMatter:()=>d,metadata:()=>n,toc:()=>c});let n=JSON.parse('{"id":"schema/concepts/by-theme/buildings/3d_buildings","title":"3D Parts","description":"In Overture, 3D building parts must be associated with specific buildings. This relationship is captured in the schema where the building\'s attribute hasparts is True and each of the **buildingpart features has a building_id pointing to the id of the building it belongs to.","source":"@site/docs/schema/concepts/by-theme/buildings/3d_buildings.mdx","sourceDirName":"schema/concepts/by-theme/buildings","slug":"/schema/concepts/by-theme/buildings/3d_buildings","permalink":"/schema/concepts/by-theme/buildings/3d_buildings","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"3D Parts"},"sidebar":"schema","previous":{"title":"Buildings schema concepts","permalink":"/schema/concepts/by-theme/buildings/"},"next":{"title":"Places schema concepts","permalink":"/schema/concepts/by-theme/places/"}}');var s=t(74848),a=t(28453),r=t(74235),l=t(15947);let d={title:"3D Parts"},o="Creating building parts from OpenStreetMap data",h={},c=[{value:"Considerations",id:"considerations",level:3},{value:"Geometric accuracy",id:"geometric-accuracy",level:4},{value:"Data integrity",id:"data-integrity",level:4},{value:"Known issues",id:"known-issues",level:3},{value:"Dual representation",id:"dual-representation",level:4},{value:"Ambiguous height tags",id:"ambiguous-height-tags",level:4},{value:"Tag ambiguity",id:"tag-ambiguity",level:4}];function u(e){let i={code:"code",h1:"h1",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",strong:"strong",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"creating-building-parts-from-openstreetmap-data",children:"Creating building parts from OpenStreetMap data"})}),"\n",(0,s.jsxs)(i.p,{children:["In Overture, 3D building parts must be associated with specific buildings. This relationship is captured in the schema where the ",(0,s.jsx)(i.strong,{children:"building"}),"'s attribute ",(0,s.jsx)(i.code,{children:"has_parts"})," is True and each of the ",(0,s.jsx)(i.strong,{children:"building_part"})," features has a ",(0,s.jsx)(i.code,{children:"building_id"})," pointing to the ",(0,s.jsx)(i.code,{children:"id"})," of the ",(0,s.jsx)(i.code,{children:"building"})," it belongs to."]}),"\n",(0,s.jsxs)(i.p,{children:["Although OpenStreetMap (OSM) offers a building relation (relations with ",(0,s.jsx)(i.code,{children:"type=building"}),") to help facilitate this association, it is seldom utilized. We therefore perform 2 steps to associate a building_part to a building:"]}),"\n",(0,s.jsxs)(r.default,{children:[(0,s.jsx)(l.default,{value:"1. Explicit assignment (relations)",children:(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:["Identify OSM relations with ",(0,s.jsx)(i.code,{children:"type=building"})," that contain exactly one member with ",(0,s.jsx)(i.code,{children:"role=outline"})," and at least one member with ",(0,s.jsx)(i.code,{children:"role=part"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["Ensure the outline is either a way or a multipolygon relation with valid geometry. This is becomes a ",(0,s.jsx)(i.strong,{children:"building"})," type with ",(0,s.jsx)(i.code,{children:"has_parts=True"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["Assign the ",(0,s.jsx)(i.code,{children:"building_id"})," of the outline to each ",(0,s.jsx)(i.code,{children:"role=part"})," feature, these are of ",(0,s.jsx)(i.strong,{children:"building_part"})," type features."]}),"\n",(0,s.jsxs)(i.li,{children:["Identify any other ",(0,s.jsx)(i.strong,{children:"building_part"})," features that are spatially contained by the building outline and assign the ",(0,s.jsx)(i.code,{children:"building_id"})," to them, even if they are not listed explicitly in the relation's members list."]}),"\n"]})}),(0,s.jsx)(l.default,{value:"2. Implicit assignment (spatial containment)",children:(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsx)(i.li,{children:"Ignore any outlines/parts ways/relations that were assigned in the explicit method."}),"\n",(0,s.jsxs)(i.li,{children:["Identify all ways or ",(0,s.jsx)(i.code,{children:"type=multipolygon"})," relations with a ",(0,s.jsx)(i.code,{children:"building"}),' tag not equal to "no" as a ',(0,s.jsx)(i.strong,{children:"building"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["Identify all ways or ",(0,s.jsx)(i.code,{children:"type=multipolygon"})," relations with a ",(0,s.jsx)(i.code,{children:"building:part"}),' tag not equal to "no" as a ',(0,s.jsx)(i.strong,{children:"building_part"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["Perform a spatial join to find all ",(0,s.jsx)(i.strong,{children:"building"})," features (from step 2) that completely contain at least one ",(0,s.jsx)(i.strong,{children:"building_part"})," feature (from step 3).","\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:["Assign ",(0,s.jsx)(i.code,{children:"has_parts=True"})," to each ",(0,s.jsx)(i.strong,{children:"building"})," and add the corresponding ",(0,s.jsx)(i.code,{children:"building_id"})," to each ",(0,s.jsx)(i.strong,{children:"building_part"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.li,{children:"Omit any parts that are not contained by an outline, as Overture does not allow orphaned parts without a known parent."}),"\n"]})})]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsxs)(i.p,{children:["Finally, we eliminate all parts that are the only part associated with a building and share the same geometry as the building. This step helps filter out many OSM buildings tagged with both ",(0,s.jsx)(i.code,{children:"building=yes"})," and ",(0,s.jsx)(i.code,{children:"building:part=yes"})," if no other parts are associated with the building."]}),"\n",(0,s.jsx)(i.h3,{id:"considerations",children:"Considerations"}),"\n",(0,s.jsx)(i.h4,{id:"geometric-accuracy",children:"Geometric accuracy"}),"\n",(0,s.jsx)(i.p,{children:"We sometimes apply a small buffer to building geometries to handle discrepancies in how spatial functions interpret containment across different query engines."}),"\n",(0,s.jsx)(i.h4,{id:"data-integrity",children:"Data integrity"}),"\n",(0,s.jsx)(i.p,{children:"We adhere to both Overture and OSM standards to ensure that all our data manipulations and transformations preserve the integrity and accuracy of the original OSM data."}),"\n",(0,s.jsx)(i.h3,{id:"known-issues",children:"Known issues"}),"\n",(0,s.jsx)(i.h4,{id:"dual-representation",children:"Dual representation"}),"\n",(0,s.jsxs)(i.p,{children:["We interpret a single OSM feature with both a ",(0,s.jsx)(i.code,{children:"building"})," and a ",(0,s.jsx)(i.code,{children:"building:part"})," tag as two separate features in Overture, each with its own unique GERS ID."]}),"\n",(0,s.jsx)(i.h4,{id:"ambiguous-height-tags",children:"Ambiguous height tags"}),"\n",(0,s.jsxs)(i.p,{children:["When ",(0,s.jsx)(i.code,{children:"type=multipolygon"})," and ",(0,s.jsx)(i.code,{children:"building:part=yes"}),", it is impossible to determine what the ",(0,s.jsx)(i.code,{children:"height"})," tag refers to. It may refer to the height of the entire building (the highest point of all parts) as stated in the OSM wiki, or in some cases, it refers to the height of the part. It is recommended to either remove the ",(0,s.jsx)(i.code,{children:"height"})," from such features or split the features into a building and a separate part feature and assign the proper height to each. In these cases, Overture will assume the height is the height of the building as stated in the wiki."]}),"\n",(0,s.jsx)(i.h4,{id:"tag-ambiguity",children:"Tag ambiguity"}),"\n",(0,s.jsxs)(i.p,{children:["When ",(0,s.jsx)(i.code,{children:"type=multipolygon"})," and ",(0,s.jsx)(i.code,{children:"building:part=yes"}),", it is impossible to know whether the characteristic tags refer to the building or the building part. It is recommended to either remove the tags from such features or split the features into a ",(0,s.jsx)(i.code,{children:"building"})," and a separate ",(0,s.jsx)(i.code,{children:"building_part"})," feature and assign the proper tags to each. In these cases, Overture will assume that each tag refers to both."]})]})}function g(e={}){let{wrapper:i}={...(0,a.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}}}]);