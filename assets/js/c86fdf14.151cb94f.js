"use strict";(self.webpackChunkoverture_documentation=self.webpackChunkoverture_documentation||[]).push([[1187],{2594:(e,t,a)=>{a.d(t,{A:()=>i});var n=a(58069),o=a(40797),l=a(74848);function i(e){const{siteConfig:{customFields:t}}=(0,o.A)();var a=e.query.replaceAll("__OVERTURE_RELEASE",t.overtureRelease);a=(a=a.replaceAll("__ATHENA_OVERTURE_RELEASE","v"+t.overtureRelease.replaceAll(".","_").replaceAll("-","_"))).replaceAll("__PMTILES_OVERTURE_RELEASE",t.overtureRelease.split(".",1));var i=e.language||"sql";return(0,l.jsx)(n.default,{language:i,title:e.title,children:a})}},34894:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>G,contentTitle:()=>M,default:()=>J,frontMatter:()=>P,metadata:()=>n,toc:()=>B});const n=JSON.parse('{"id":"examples/build-a-map","title":"MapLibre","description":"create your own map","source":"@site/docs/examples/build-a-map.mdx","sourceDirName":"examples","slug":"/examples/build-a-map","permalink":"/examples/build-a-map","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1750850762000,"frontMatter":{"description":"create your own map","title":"MapLibre"},"sidebar":"docs","previous":{"title":"Lonboard","permalink":"/examples/lonboard"},"next":{"title":"Pandas","permalink":"/examples/pandas"}}');var o=a(74848),l=a(28453),i=a(58069),s=a(65537),r=a(79329),c=a(96540),d=a(16443),p=a.n(d),m=a(40056),h="#3063d2",u="#09bac6",x="#EBD5BD",y="#dce6ef",g="#a7bfd7",f="#071F3F",b="#071F3F",j="#dce6ef";const w={placeHighZoom:{id:"placeHighZoom",type:"symbol",source:"placenames","source-layer":"placenames",minzoom:9,maxzoom:24,layout:{"text-field":["get","name"],"text-font":["Noto Sans Bold"],"text-size":["step",["zoom"],14,10,["match",["get","locality_type"],["borough"],14,["suburb"],12,0],12,["match",["get","locality_type"],["borough"],16,["suburb"],14,["neighborhood"],10,0],14,["match",["get","locality_type"],["borough"],18,["suburb"],16,["neighborhood"],12,0],15,["match",["get","locality_type"],["borough"],20,["suburb"],18,["neighborhood"],14,0],16,["match",["get","locality_type"],["borough"],20,["suburb"],18,["neighborhood"],14,["block"],12,0]],"text-transform":["step",["zoom"],"none",11,"uppercase"],"text-max-width":6,"symbol-avoid-edges":!0,"text-padding":10,"text-justify":"auto"},paint:{"text-color":b,"text-halo-color":j,"text-halo-width":1}},placeMidZoom:{id:"placeMidZoom",type:"symbol",source:"placenames","source-layer":"placenames",minzoom:8,maxzoom:24,filter:["all",["has","name"],["step",["zoom"],["==","$type","Point"],8,["match",["get","localityType"],["settlement"],!0,!1],9,["match",["get","localityType"],["urban","settlement"],!0,!1]]],layout:{"text-field":["get","name"],"text-font":["Noto Sans Bold"],"text-size":["step",["zoom"],10,9,["match",["get","localityType"],["megacity"],20,["metropolis"],18,["city"],16,["municipality"],14,["town"],10,0],10,["match",["get","localityType"],["megacity"],22,["metropolis"],20,["city"],18,["municipality"],16,["town"],12,0],12,["match",["get","localityType"],["megacity"],22,["metropolis"],20,["city"],18,["municipality"],16,["town"],12,["village"],10,0],14,["match",["get","subclass"],["megacity"],22,["metropolis"],20,["city"],18,["municipality"],16,["town"],14,["village","hamlet"],12,0],15,["match",["get","subclass"],["megacity"],22,["metropolis"],20,["city"],18,["municipality"],16,["town"],14,["village","hamlet"],14,0],16,["match",["get","subclass"],["village","hamlet"],16,0]],"text-transform":["step",["zoom"],"none",11,"uppercase"],"text-padding":["step",["zoom"],10,9,8,10,5,12,3],"text-max-width":6,"symbol-avoid-edges":!0,"symbol-sort-key":["get","sort_key"],"text-justify":"auto"},paint:{"text-color":b,"text-halo-color":j,"text-halo-width":1}}},v={id:"buildings",type:"fill-extrusion",minzoom:12,maxzoom:24,source:"buildings","source-layer":"buildings",paint:{"fill-extrusion-color":"#dce6ef","fill-extrusion-opacity":.6,"fill-extrusion-base":0,"fill-extrusion-height":["case",["has","height"],["to-number",["get","height"]],3.2]}},z={id:"placesLabel",type:"symbol",source:"places","source-layer":"places",filter:["all",["has","name"],[">",["get","confidence"],.75]],minzoom:15,maxzoom:24,layout:{"text-field":["concat","\u25a0\n",["get","name"]],"text-font":["Noto Sans Bold"],"text-max-width":5,"text-size":10,"text-line-height":1,"text-justify":"center","text-anchor":"center","text-radial-offset":.8,"text-padding":4},paint:{"text-color":b,"text-halo-color":j,"text-halo-width":1}},E={footwayCasing:{id:"footwayCasing",type:"line",source:"roads","source-layer":"roads",minzoom:15,maxzoom:24,filter:["match",["get","class"],["footway"],!0,!1],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":["interpolate",["exponential",1.5],["zoom"],12,.25,20,1.3],"line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,.5,16,3,22,25],"line-color":y}},footway:{id:"footway",type:"line",source:"roads","source-layer":"roads",minzoom:15,maxzoom:24,filter:["match",["get","class"],["footway"],!0,!1],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":["interpolate",["exponential",1.5],["zoom"],12,.5,16,3,22,25],"line-color":"#b9ccdf"}},parkingAisleUnknownCasing:{id:"parkingAisleUnknownCasing",type:"line",source:"roads","source-layer":"roads",minzoom:14,maxzoom:24,filter:["match",["get","class"],["parking_aisle","unknown"],!0,!1],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":["interpolate",["exponential",1.5],["zoom"],12,.25,20,1.3],"line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,.5,16,3.5,22,75],"line-color":y}},residentialCasing:{id:"residentialCasing",type:"line",source:"roads","source-layer":"roads",minzoom:12,maxzoom:24,filter:["match",["get","class"],["residential"],!0,!1],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":["interpolate",["exponential",1.5],["zoom"],12,.75,20,1.3],"line-gap-width":["interpolate",["exponential",1.5],["zoom"],12,1,16,6,22,125],"line-color":y}},secondaryTertiaryCasing:{id:"secondaryTertiaryCasing",type:"line",source:"roads","source-layer":"roads",minzoom:11,maxzoom:24,filter:["match",["get","class"],["secondary","tertiary"],!0,!1],paint:{"line-width":["interpolate",["exponential",1.5],["zoom"],12,1,20,1.3],"line-gap-width":["interpolate",["exponential",1.5],["zoom"],10,.5,12,2.2,16,6.6,22,160],"line-color":y}},primaryCasing:{id:"primaryCasing",type:"line",source:"roads","source-layer":"roads",minzoom:8,maxzoom:24,filter:["match",["get","class"],["primary"],!0,!1],layout:{"line-cap":["step",["zoom"],"butt",16,"round"],"line-join":["step",["zoom"],"miter",16,"round"]},paint:{"line-width":["interpolate",["exponential",1.5],["zoom"],12,1,20,1.4],"line-gap-width":["interpolate",["exponential",1.5],["zoom"],8,.5,12,3.1,16,9.3,22,175],"line-color":y}},parkingAisleUnknown:{id:"parkingAisleUnknown",type:"line",source:"roads","source-layer":"roads",minzoom:14,maxzoom:24,filter:["match",["get","class"],["parking_aisle","unknown"],!0,!1],layout:{"line-cap":"round","line-join":"round"},paint:{"line-width":["interpolate",["exponential",1.5],["zoom"],12,.5,16,3.5,22,75],"line-color":g}},residential:{id:"residential",type:"line",source:"roads","source-layer":"roads",minzoom:12,maxzoom:24,filter:["match",["get","class"],["residential"],!0,!1],layout:{"line-cap":["step",["zoom"],"butt",13,"round"],"line-join":["step",["zoom"],"miter",13,"round"]},paint:{"line-width":["interpolate",["exponential",1.5],["zoom"],12,1,16,6,22,125],"line-color":g}},secondaryTertiary:{id:"secondaryTertiary",type:"line",source:"roads","source-layer":"roads",minzoom:10,maxzoom:24,filter:["match",["get","class"],["secondary","tertiary"],!0,!1],layout:{"line-cap":["step",["zoom"],"butt",13,"round"],"line-join":["step",["zoom"],"miter",13,"round"]},paint:{"line-width":["interpolate",["exponential",1.5],["zoom"],10,.5,12,2.2,16,6.6,22,160],"line-color":g}},primary:{id:"primary",type:"line",source:"roads","source-layer":"roads",minzoom:8,maxzoom:24,filter:["match",["get","class"],["primary"],!0,!1],layout:{"line-cap":["step",["zoom"],"butt",13,"round"],"line-join":["step",["zoom"],"miter",13,"round"]},paint:{"line-width":["interpolate",["exponential",1.5],["zoom"],8,.5,12,3.1,16,9.3,22,175],"line-color":g}},motorwayCasing:{id:"motorwayCasing",type:"line",source:"roads","source-layer":"roads",minzoom:6,maxzoom:24,filter:["match",["get","class"],["motorway"],!0,!1],layout:{"line-cap":["step",["zoom"],"butt",13,"round"],"line-join":["step",["zoom"],"miter",13,"round"]},paint:{"line-width":["interpolate",["exponential",1.5],["zoom"],12,1,20,1.4],"line-gap-width":["interpolate",["exponential",1.5],["zoom"],6,.5,12,3.3,16,9.9,22,175],"line-color":y}},motorway:{id:"motorway",type:"line",source:"roads","source-layer":"roads",minzoom:6,maxzoom:24,filter:["match",["get","class"],["motorway"],!0,!1],layout:{"line-cap":["step",["zoom"],"butt",12,"round"],"line-join":["step",["zoom"],"miter",12,"round"]},paint:{"line-width":["interpolate",["exponential",1.5],["zoom"],6,.5,12,3.3,16,9.9,22,175],"line-color":"#95b2d0"}},residentialLabel:{id:"residentialLabel",type:"symbol",source:"roads","source-layer":"roads",minzoom:13,maxzoom:24,filter:["match",["get","class"],["residential","unknown"],!0,!1],layout:{"text-transform":"uppercase","text-size":["interpolate",["linear"],["zoom"],13,9,18,["match",["get","class"],["access","path"],9,12]],"text-max-angle":30,"symbol-spacing":["interpolate",["linear"],["zoom"],13,200,16,400],"text-field":["get","name"],"text-font":["Noto Sans Bold"],"symbol-placement":"line","text-padding":5},paint:{"text-color":f,"text-halo-color":"hsl(0,0%,100%)","text-halo-width":1}},highwayLabel:{id:"highwayLabel",type:"symbol",source:"roads","source-layer":"roads",minzoom:13,maxzoom:24,filter:["match",["get","class"],["motorway","primary","secondary","tertiary"],!0,!1],layout:{"text-transform":"uppercase","text-size":["interpolate",["linear"],["zoom"],13,9,18,["match",["get","class"],["access","path"],9,12]],"text-max-angle":30,"symbol-spacing":["interpolate",["linear"],["zoom"],13,200,16,400],"text-field":["get","name"],"text-font":["Noto Sans Bold"],"symbol-placement":"line"},paint:{"text-color":f,"text-halo-color":"hsl(0,0%,100%)","text-halo-width":1}}},S={land:{id:"land",type:"fill",source:"base","source-layer":"land",filter:["match",["get","subtype"],["land"],!0,!1],minzoom:0,maxzoom:24,paint:{"fill-color":"#ccdae8"}},sand:{id:"sand",type:"fill",source:"base","source-layer":"land",filter:["match",["get","subtype"],["sand"],!0,!1],minzoom:0,maxzoom:24,paint:{"fill-color":x}},wetland:{id:"wetland",type:"fill",source:"base","source-layer":"land",filter:["match",["get","subtype"],["wetland"],!0,!1],minzoom:0,maxzoom:24,paint:{"fill-color":"#00A9BF"}},forest:{id:"forest",type:"fill",source:"base","source-layer":"land",filter:["match",["get","subtype"],["forest","grass","scrub"],!0,!1],minzoom:0,maxzoom:24,paint:{"fill-color":"#09bac6"}}},_={parks:{id:"parks",type:"fill",source:"base","source-layer":"landuse",filter:["match",["get","subtype"],["park"],!0,!1],minzoom:0,maxzoom:24,paint:{"fill-color":u}},golfGreens:{id:"golfGreens",type:"fill",source:"base","source-layer":"landuse",filter:["==",["get","class"],"fairway"],minzoom:0,maxzoom:24,paint:{"fill-color":u}},recSand:{id:"golfBunker",type:"fill",source:"base","source-layer":"landuse",filter:["match",["get","surface"],["recreation_sand"],!0,!1],minzoom:0,maxzoom:24,paint:{"fill-color":x}}},A={waterPolygons:{id:"water-fill",type:"fill",source:"base","source-layer":"water",filter:["==",["geometry-type"],"Polygon"],minzoom:0,maxzoom:24,paint:{"fill-color":h}},waterLinestrings:{id:"water-line",type:"line",source:"base","source-layer":"water",filter:["==",["geometry-type"],"LineString"],minzoom:0,maxzoom:24,paint:{"line-width":3,"line-color":h}}};function R(){const e=(0,c.useRef)(null),t=(0,c.useRef)(null),[a]=(0,c.useState)(-122.33),[n]=(0,c.useState)(47.6),[l]=(0,c.useState)(13);return(0,c.useEffect)((()=>{if(t.current)return;let o=new m.Zs;p().addProtocol("pmtiles",o.tile),t.current=new(p().Map)({container:e.current,center:[a,n],zoom:l,minZoom:10,pitch:45,hash:!0,cooperativeGestures:{windowsHelpText:"Use Ctrl + scroll to zoom the map.",macHelpText:"Use \u2318 + scroll to zoom the map.",mobileHelpText:"Use 2 fingers to move the map."},style:{light:{anchor:"viewport",color:"white",intensity:.8},version:8,glyphs:"https://demotiles.maplibre.org/font/{fontstack}/{range}.pbf",sources:{roads:{type:"vector",url:"pmtiles://../../example-map/tiles/roads.pmtiles"},places:{type:"vector",url:"pmtiles://../../example-map/tiles/places.pmtiles"},placenames:{type:"vector",url:"pmtiles://../../example-map/tiles/placenames.pmtiles"},buildings:{type:"vector",url:"pmtiles://../../example-map/tiles/buildings.pmtiles"},base:{type:"vector",url:"pmtiles://../../example-map/tiles/base.pmtiles"}},layers:[{id:"background",type:"background",minzoom:0,maxzoom:24,paint:{"background-color":"hsl(216,20%,95%)"}},S.land,S.sand,S.wetland,S.forest,_.recSand,_.parks,_.golfGreens,A.waterPolygons,A.waterLinestrings,E.footwayCasing,E.footway,E.parkingAisleUnknownCasing,E.residentialCasing,E.secondaryTertiaryCasing,E.primaryCasing,E.parkingAisleUnknown,E.residential,E.secondaryTertiary,E.primary,E.motorwayCasing,E.motorway,E.residentialLabel,E.highwayLabel,v,z,w.placeHighZoom,w.placeMidZoom]}}),t.current.addControl(new(p().NavigationControl),"top-right"),t.current.addControl(new(p().FullscreenControl));return t.current.addControl(new class{constructor(e){switch(this._options={...e},this._container=document.createElement("div"),this._container.classList.add("maplibregl-ctrl"),this._container.classList.add("closed"),this._options.expandDirection||"right"){case"top":this._container.classList.add("reverse");case"down":this._container.classList.add("column");break;case"left":this._container.classList.add("reverse");case"right":this._container.classList.add("row")}}onAdd(e){this._map=e;const t=document.createElement("input");t.type="range",t.value=50,t.addEventListener("change",(t=>{console.log(t.target.value),e.setFilter("placesLabel",["all",[">=",["number",["get","confidence"]],t.target.value/100]])}));const a=document.createElement("button");a.classList.add("layer"),a.classList.add("active"),a.innerHTML="Places",a.addEventListener("click",(()=>{"visible"==e.getLayoutProperty("placesLabel","visibility")?(e.setLayoutProperty("placesLabel","visibility","none"),a.classList.remove("active"),t.disabled=!0):(e.setLayoutProperty("placesLabel","visibility","visible"),a.classList.add("active"),t.disabled=!1)}));const n=document.createElement("div");return n.appendChild(a),n.appendChild(t),this._container.appendChild(n),this._container}onRemove(){this._container.parentNode?.removeChild(this._container),delete this._map}},"bottom-left"),t.current.addControl(new(p().AttributionControl)({customAttribution:'<a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a>, <a href="https://overturemaps.org" target="_blank">OvertureMaps Foundation</a>'}),"bottom-right"),()=>{p().removeProtocol("pmtiles")}}),[a,n,l]),(0,o.jsx)("div",{className:"map-wrap",children:(0,o.jsx)("div",{ref:e,className:"map"})})}var D=a(2594);const T="LOAD spatial; -- noqa\n-- Access the data on AWS in this example\nSET s3_region='us-west-2';\n\nCOPY (\n    SELECT\n        names.primary AS name,\n        categories.primary as category,\n        ROUND(confidence,2) as confidence,\n        geometry -- DuckDB v.1.1.0 will autoload this as a `geometry` type\nFROM read_parquet('s3://overturemaps-us-west-2/release/__OVERTURE_RELEASE/theme=places/*/*')\nWHERE\n    -- Point geometry doesn't require looking at both min and max:\n    bbox.xmin BETWEEN -122.68 AND -121.98 AND\n    bbox.ymin BETWEEN 47.36 AND 47.79\n) TO 'seattle_places.geojson' WITH (FORMAT GDAL, DRIVER 'GeoJSON', SRS 'EPSG:4326');\n",O="LOAD spatial; -- noqa\n\nCOPY (\n    SELECT\n        subtype,\n        locality_type,\n        names.primary as name,\n        geometry -- DuckDB v.1.1.0 will autoload this as a `geometry` type\n    FROM read_parquet('az://overturemapswestus2.blob.core.windows.net/release/2024-04-16-beta.0/theme=admins/type=locality/*', hive_partitioning=1)\n    WHERE bbox.xmin > -122.679404 AND bbox.xmax < -121.978275\n    AND bbox.ymin > 47.360619 AND bbox.ymax < 47.786336\n) TO 'seattle_placenames.geojson'\nWITH (FORMAT GDAL, DRIVER 'GeoJSON', SRS 'EPSG:4326');\n",N="LOAD spatial; -- noqa\n\nCOPY (\n    SELECT\n        names.primary as name,\n        height,\n        level,\n        geometry -- DuckDB v.1.1.0 will autoload this as a `geometry` type\n    FROM read_parquet('az://overturemapswestus2.blob.core.windows.net/release/__OVERTURE_RELEASE/theme=buildings/type=building/*', filename=true, hive_partitioning=1)\n    WHERE bbox.xmin > -122.68 AND bbox.xmax < -121.98\n    AND bbox.ymin > 47.36 AND bbox.ymax < 47.79\n) TO 'seattle_buildings.geojsonseq' WITH (FORMAT GDAL, DRIVER 'GeoJSONSeq', SRS 'EPSG:4326');\n",L="LOAD spatial; -- noqa\n\nCOPY (\n    SELECT\n        id,\n        names.primary AS name,\n        subtype,\n        class,\n        subclass,\n        geometry  -- DuckDB v.1.1.0 will autoload this as a `geometry` type\n    FROM read_parquet('s3://overturemaps-us-west-2/release/__OVERTURE_RELEASE/theme=transportation/type=segment/*')\n    WHERE\n        subtype = 'road'\n        AND bbox.xmin > -122.68 AND bbox.xmax < -121.98\n        AND bbox.ymin > 47.36 AND bbox.ymax < 47.79\n) TO 'seattle_roads.geojsonseq'\nWITH (FORMAT GDAL, DRIVER 'GeoJSONSeq', SRS 'EPSG:4326');\n",q="LOAD spatial; -- noqa\n\nCOPY (\n    SELECT\n        subtype,\n        class,\n        names.primary AS name,\n        geometry -- DuckDB v.1.1.0 will autoload this as a `geometry` type\n    FROM read_parquet('s3://overturemaps-us-west-2/release/__OVERTURE_RELEASE/theme=base/type=land/*')\n    WHERE\n        bbox.xmin > -122.68 AND bbox.xmax < -121.98\n        AND bbox.ymin > 47.36 AND bbox.ymax < 47.79\n    )\n    TO 'seattle_land.geojsonseq'\nWITH (FORMAT GDAL, DRIVER 'GeoJSONSeq', SRS 'EPSG:4326');\n",k="LOAD spatial; -- noqa\n\nCOPY (\n    SELECT\n        subtype,\n        class,\n        names.primary AS name,\n        surface,\n        geometry -- DuckDB v.1.1.0 will autoload this as a `geometry` type\n    FROM read_parquet('s3://overturemaps-us-west-2/release/__OVERTURE_RELEASE/theme=base/type=land_use/*')\n    WHERE\n        bbox.xmin > -122.68 AND bbox.xmax < -121.98\n        AND bbox.ymin > 47.36 AND bbox.ymax < 47.79\n    )\nTO 'seattle_land_use.geojsonseq' WITH (FORMAT GDAL, DRIVER 'GeoJSONSeq', SRS 'EPSG:4326');\n",C="LOAD spatial; -- noqa\nCOPY (\n    SELECT\n        subtype,\n        class,\n        names.primary AS name,\n        geometry -- DuckDB v.1.1.0 will autoload this as a `geometry` type\n    FROM read_parquet('s3://overturemaps-us-west-2/release/__OVERTURE_RELEASE/theme=base/type=water/*')\n    WHERE\n        subtype in ('ocean', 'lake', 'pond', 'reservoir', 'river', 'stream', 'water', 'canal')\n        AND bbox.xmin > -123 AND bbox.xmax < -122\n        AND bbox.ymin > 47 AND bbox.ymax < 48\n) TO 'seattle_water.geojsonseq' WITH (FORMAT GDAL, DRIVER 'GeoJSONSeq', SRS 'EPSG:4326');\n",P={description:"create your own map",title:"MapLibre"},M=void 0,G={},B=[{value:"Download and process only the data you need",id:"download-and-process-only-the-data-you-need",level:2},{value:"Create your map with Maplibre + PMTiles",id:"create-your-map-with-maplibre--pmtiles",level:2},{value:"Style the layers",id:"style-the-layers",level:2}];function F(e){const t={a:"a",code:"code",em:"em",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,l.R)(),...e.components},{Details:a}=t;return a||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(R,{}),"\n",(0,o.jsx)(t.h2,{id:"download-and-process-only-the-data-you-need",children:"Download and process only the data you need"}),"\n",(0,o.jsxs)(t.p,{children:["Overture data is released in the cloud-native format ",(0,o.jsx)(t.a,{href:"https://geoparquet.org/",children:"GeoParquet"}),". It is further partitioned by ",(0,o.jsx)(t.em,{children:"theme"})," and ",(0,o.jsx)(t.em,{children:"type"}),". Downloading the data through a tool like ",(0,o.jsx)(t.a,{href:"https://duckdb.org/",children:"DuckDB"})," can take advantage of these properties, giving the best performance. After downloading and converting the data to GeoJSON, we can use ",(0,o.jsx)(t.a,{href:"https://github.com/felt/tippecanoe",children:"tippecanoe"})," to create a ",(0,o.jsx)(t.a,{href:"https://github.com/protomaps/PMTiles",children:(0,o.jsx)(t.code,{children:"PMTiles"})})," archive for each theme."]}),"\n",(0,o.jsxs)(s.default,{queryString:"theme-data",children:[(0,o.jsxs)(r.default,{value:"places",label:"Places",default:!0,children:[(0,o.jsxs)(t.p,{children:["The places data theme represents business and points of interest in the real world. Read more about the places data schema in the ",(0,o.jsx)(t.a,{href:"https://docs.overturemaps.org/guides/places/",children:"documentation"}),"."]}),(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsxs)(t.p,{children:["The following DuckDB query downloads places data within a specific bounding box and writes a ",(0,o.jsx)(t.code,{children:"GeoJSON"})," file."]}),"\n",(0,o.jsx)(D.A,{query:T}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsxs)(t.p,{children:["Next, create a ",(0,o.jsx)(t.code,{children:"pmtiles"})," archive from ",(0,o.jsx)(t.code,{children:"seattle_places.geojson"})," with ",(0,o.jsx)(t.a,{href:"https://github.com/felt/tippecanoe",children:"tippecanoe"}),"."]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"tippecanoe -fo places.pmtiles -Z13 -z13 -l places seattle_places.geojson\n"})}),"\n",(0,o.jsxs)(a,{children:[(0,o.jsx)("summary",{children:"Tippecanoe flag explanation"}),(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"-fo places.pmtiles"})," The output file will be places.pmtiles. It will be overwritten if it exists."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"-Z13"})," and ",(0,o.jsx)(t.code,{children:"-z13"})," will produce a tileset starting at zoom 13 and going up to zoom 13 (only 1 zoom level)."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"-l places"}),' names the layer "places"']}),"\n"]})]}),"\n"]}),"\n"]})]}),(0,o.jsxs)(r.default,{value:"placenames",label:"Placenames",default:!0,children:[(0,o.jsxs)(t.p,{children:["The ",(0,o.jsx)(t.a,{href:"https://docs.overturemaps.org/guides/divisions/",children:"divisions theme"})," contains named administrative units (countries, regions, counties, cities, etc.) and their boundaries. To add labels for populated places to the map, we query the divisions theme to get the primary name for each locality."]}),(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsxs)(t.p,{children:["The following DuckDB queries downloads placenames from the divisions theme within the bounding box and saves it as ",(0,o.jsx)(t.code,{children:"seattle_placenames.geojson"})]}),"\n",(0,o.jsx)(D.A,{query:O}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsxs)(t.p,{children:["Run ",(0,o.jsx)(t.a,{href:"https://github.com/felt/tippecanoe",children:"tippecanoe"})," to produce a ",(0,o.jsx)(t.code,{children:"pmtiles"})," archive from ",(0,o.jsx)(t.code,{children:"seattle_placenames.geojson"})]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"tippecanoe -fo placenames.pmtiles -Z5 -z10 -l placenames seattle_placenames.geojson\n"})}),"\n",(0,o.jsxs)(a,{children:[(0,o.jsx)("summary",{children:"Tippecanoe flag explanation"}),(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"-fo placenames.pmtiles"})," is our output file. It will be overwritten if it exists."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"-Z5"})," and ",(0,o.jsx)(t.code,{children:"-z10"})," will produce a tileset starting at zoom 5 and going up to zoom 10."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"-l placenames"}),' names the layer "placenames"']}),"\n"]})]}),"\n"]}),"\n"]})]}),(0,o.jsxs)(r.default,{value:"buildings",label:"Buildings",default:!0,children:[(0,o.jsx)(t.p,{children:"Overture contains billions of buildings distributed across hundreds of GeoParquet files."}),(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsxs)(t.p,{children:["The following DuckDB query reads only the metadata of each file and then downloads ",(0,o.jsx)(t.em,{children:"only"})," the buildings within our bounding box to a line-delimited ",(0,o.jsx)(t.code,{children:"GeoJSONSeq"})," file."]}),"\n",(0,o.jsx)(D.A,{query:N}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsxs)(t.p,{children:["Run ",(0,o.jsx)(t.a,{href:"https://github.com/felt/tippecanoe",children:"tippecanoe"})," to produce a ",(0,o.jsx)(t.code,{children:"pmtiles"})," archive from ",(0,o.jsx)(t.code,{children:"seattle_buildings.geojsonseq"})]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"tippecanoe -fo buildings.pmtiles -Z13 -z13 -l buildings -P seattle_buildings.geojsonseq\n"})}),"\n",(0,o.jsxs)(a,{children:[(0,o.jsx)("summary",{children:"Tippecanoe flag explanation"}),(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"-fo buildings.pmtiles"})," is our output file. It will be overwritten if it exists."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"-Z13"})," and ",(0,o.jsx)(t.code,{children:"-z13"})," will produce a tileset starting at zoom 13 and going up to zoom 13 (so only 1 zoom level)."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"-l buildings"}),' names the layer "buildings"']}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"-P"})," allows tippecanoe to read the file in parallel. Since we created a GeoJSON sequence file instead of a single GeoJSON Feature Collection, tippecanoe can process the input data more efficiently."]}),"\n"]})]}),"\n"]}),"\n"]})]}),(0,o.jsxs)(r.default,{value:"roads",label:"Roads",default:!0,children:[(0,o.jsxs)(t.p,{children:["The Overture transportation theme has two types: ",(0,o.jsx)(t.code,{children:"connectors"})," and ",(0,o.jsx)(t.code,{children:"segments"}),". To extract and render the road lines, we will query for ",(0,o.jsx)(t.code,{children:"type=segment"}),"."]}),(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsxs)(t.p,{children:["This DuckDB query downloads road segments from Overture to a ",(0,o.jsx)(t.code,{children:"GeoJSONSeq"})," file."]}),"\n",(0,o.jsx)(D.A,{query:L}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsxs)(t.p,{children:["Run ",(0,o.jsx)(t.a,{href:"https://github.com/felt/tippecanoe",children:"tippecanoe"})," to produce a ",(0,o.jsx)(t.code,{children:"pmtiles"})," archive from ",(0,o.jsx)(t.code,{children:"seattle_roads.geojsonseq"})]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"tippecanoe -fo roads.pmtiles -Z10 -B10 -z13 -l roads -P seattle_roads.geojsonseq\n"})}),"\n",(0,o.jsxs)(a,{children:[(0,o.jsx)("summary",{children:"Tippecanoe flag explanation"}),(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"-fo roads.pmtiles"})," is our output file. It will be overwritten if it exists."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"-Z10"})," and ",(0,o.jsx)(t.code,{children:"-z13"})," will produce a tileset starting at zoom 10 and going up to zoom 13."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"-B10"})," will ensure that all featuers are present from zoom level 10."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"-l roads"}),' names the layer "roads"']}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"-P"})," allows tippecanoe to read the file in parallel. Since we created a GeoJSON sequence file instead of a single GeoJSON Feature Collection, tippecanoe can process the input data more efficiently."]}),"\n"]})]}),"\n"]}),"\n"]})]}),(0,o.jsx)(r.default,{value:"base",label:"Base (Land, Land Use & Water)",default:!0,children:(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsxs)(t.p,{children:["The base theme contains five feature types: ",(0,o.jsx)(t.code,{children:"infrastructure"}),", ",(0,o.jsx)(t.code,{children:"land"}),",",(0,o.jsx)(t.code,{children:"land_cover"}),", ",(0,o.jsx)(t.code,{children:"land_use"}),", and ",(0,o.jsx)(t.code,{children:"water"}),". For this map, we want only the land, land use, and water features. We'll run three separate queries to obtain to obtain those features and combine them into a single pmtiles archive with different layers."]}),"\n",(0,o.jsxs)(a,{children:[(0,o.jsxs)("summary",{children:["1. DuckDB query to produce ",(0,o.jsx)(t.code,{children:"land.geojsonseq"})]}),(0,o.jsx)(D.A,{query:q})]}),"\n",(0,o.jsxs)(a,{children:[(0,o.jsxs)("summary",{children:["2. DuckDB query to produce ",(0,o.jsx)(t.code,{children:"land_use.geojsonseq"})]}),(0,o.jsx)(D.A,{query:k})]}),"\n",(0,o.jsxs)(a,{children:[(0,o.jsxs)("summary",{children:["3. DuckDB query to produce ",(0,o.jsx)(t.code,{children:"water.geojsonseq"})]}),(0,o.jsx)(D.A,{query:C}),(0,o.jsx)(t.p,{children:"Note: We use a slightly larger bounding box to capture the Ocean water polygons, too"})]}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["\n",(0,o.jsxs)(t.p,{children:["Run ",(0,o.jsx)(t.a,{href:"https://github.com/felt/tippecanoe",children:"tippecanoe"})," to produce a ",(0,o.jsx)(t.code,{children:"pmtiles"})," archive with three ",(0,o.jsx)(t.code,{children:"geojsonseq"})," file as input:"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-bash",children:"tippecanoe -fo base.pmtiles -Z8 -z13 -P \\\n    --named-layer=land:seattle_land.geojsonseq \\\n    --named-layer=landuse:seattle_land_use.geojsonseq \\\n    --named-layer=water:seattle_water.geojsonseq\n"})}),"\n",(0,o.jsxs)(a,{children:[(0,o.jsx)("summary",{children:"Tippecanoe flag explanation"}),(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"-fo tiles/base.pmtiles"})," is our output file. It will be overwritten if it exists."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"-Z8"})," and ",(0,o.jsx)(t.code,{children:"-z13"})," will produce a tileset starting at zoom 8 going up to zoom 13."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"--named-layer=land:seattle_land.geojsonseq"})," creates the ",(0,o.jsx)(t.code,{children:"land"})," layer from the contents of ",(0,o.jsx)(t.code,{children:"seattle_land.geojson"})," (and similarly for the other files)"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"-P"})," allows tippecanoe to read the file in parallel. Since we created a GeoJSON sequence file instead of a single GeoJSON Feature Collection, tippecanoe can process the input data more efficiently."]}),"\n"]})]}),"\n"]}),"\n"]})})]}),"\n",(0,o.jsx)("hr",{}),"\n",(0,o.jsx)(t.h2,{id:"create-your-map-with-maplibre--pmtiles",children:"Create your map with Maplibre + PMTiles"}),"\n",(0,o.jsx)(t.p,{children:"At this point, we have created five PMTiles archives from five of the Overture themes:"}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.code,{children:"places.pmtiles"})}),"\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.code,{children:"placenames.pmtiles"})}),"\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.code,{children:"buildings.pmtiles"})}),"\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.code,{children:"roads.pmtiles"})}),"\n",(0,o.jsx)(t.li,{children:(0,o.jsx)(t.code,{children:"base.pmtiles"})}),"\n"]}),"\n",(0,o.jsxs)(t.p,{children:["The map on this page combines a ",(0,o.jsx)(t.a,{href:"https://docs.maptiler.com/react/maplibre-gl-js/how-to-use-maplibre-gl-js/",children:"react maplibre example"})," with ",(0,o.jsx)(t.a,{href:"https://codesandbox.io/s/black-dream-oycvf2?file=/src/App.js",children:"PMTiles"}),". You can ",(0,o.jsx)(t.a,{href:"https://github.com/OvertureMaps/docs/blob/main/src/components/map.js",children:"view the source"})," for the above map on github for a complete example using react, or, check out the ",(0,o.jsx)(t.a,{href:"https://labs.overturemaps.org/overture-with-daylight",children:"map based on July's release"})," for a non-react implementation of PMTiles."]}),"\n",(0,o.jsxs)(t.p,{children:["Using PMTiles with react requires adding the ",(0,o.jsx)(t.a,{href:"https://docs.protomaps.com/pmtiles/maplibre",children:"PMtiles protocol"}),":"]}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-javascript",children:"import maplibregl from 'maplibre-gl';\nimport { Protocol } from 'pmtiles';\n\nuseEffect(() => {\n  let protocol = new Protocol();\n  maplibregl.addProtocol(\"pmtiles\",protocol.tile);\n\n  ... initialize your map here ...\n\n  return () => {\n    maplibregl.removeProtocol(\"pmtiles\");\n  }\n}, []);\n"})}),"\n",(0,o.jsx)(t.p,{children:"Then, reference the tile archives with a relative path when initializing the map:"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-javascript",children:'  style: {\n    sources: {\n      roads: {\n        type: "vector",\n        url: "pmtiles://../example-map/tiles/roads.pmtiles"\n      },\n      places: {\n        type: "vector",\n        url: "pmtiles://../example-map/tiles/places.pmtiles"\n      },\n    ...\n'})}),"\n",(0,o.jsx)(t.h2,{id:"style-the-layers",children:"Style the layers"}),"\n",(0,o.jsxs)(t.p,{children:["Each tab below contains the complete styles in the ",(0,o.jsx)(t.a,{href:"https://maplibre.org/maplibre-style-spec/",children:"Maplibre Style Spec"})," for the map on this page."]}),"\n",(0,o.jsxs)(s.default,{queryString:"map-layer",children:[(0,o.jsx)(r.default,{value:"places",label:"Places",default:!0,children:(0,o.jsx)(i.default,{language:"json",children:JSON.stringify(z,null,2)})}),(0,o.jsx)(r.default,{value:"placenames",label:"Placenames",default:!0,children:(0,o.jsx)(i.default,{language:"json",children:JSON.stringify(w,null,2)})}),(0,o.jsx)(r.default,{value:"buildings",label:"Buildings",default:!0,children:(0,o.jsx)(i.default,{language:"json",children:JSON.stringify(v,null,2)})}),(0,o.jsx)(r.default,{value:"roads",label:"Roads",default:!0,children:(0,o.jsx)(i.default,{language:"json",children:JSON.stringify(E,null,2)})}),(0,o.jsx)(r.default,{value:"land",label:"Land",default:!0,children:(0,o.jsx)(i.default,{language:"json",children:JSON.stringify(S,null,2)})}),(0,o.jsx)(r.default,{value:"landuse",label:"Landuse",default:!0,children:(0,o.jsx)(i.default,{language:"json",children:JSON.stringify(_,null,2)})}),(0,o.jsx)(r.default,{value:"water",label:"Water",default:!0,children:(0,o.jsx)(i.default,{language:"json",children:JSON.stringify(A,null,2)})})]})]})}function J(e={}){const{wrapper:t}={...(0,l.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(F,{...e})}):F(e)}}}]);