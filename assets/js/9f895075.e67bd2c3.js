"use strict";(self.webpackChunkoverture_documentation=self.webpackChunkoverture_documentation||[]).push([[2580],{2594:(e,t,n)=>{n.d(t,{A:()=>i});var a=n(58069),s=n(40797),r=n(74848);function i(e){const{siteConfig:{customFields:t}}=(0,s.A)();var n=e.query.replaceAll("__OVERTURE_RELEASE",t.overtureRelease);n=(n=n.replaceAll("__ATHENA_OVERTURE_RELEASE","v"+t.overtureRelease.replaceAll(".","_").replaceAll("-","_"))).replaceAll("__PMTILES_OVERTURE_RELEASE",t.overtureRelease.split(".",1));var i=e.language||"sql";return(0,r.jsx)(a.default,{language:i,title:e.title,children:n})}},21614:(e,t,n)=>{n.d(t,{A:()=>a});const a=n.p+"assets/images/buildings-change-type-amhara-region-1677aff88b0bdbaa62445a8ce3ebb249.png"},54016:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>g,contentTitle:()=>d,default:()=>x,frontMatter:()=>c,metadata:()=>a,toc:()=>u});const a=JSON.parse('{"id":"gers/changelog","title":"Data Changelog","description":"With each data release, Overture publishes a changelog that capture changes in the data from the previous release to the current release. This information can be used to guide decisions about data matching, better understand data stability, and help detect data errors.","source":"@site/docs/gers/changelog.mdx","sourceDirName":"gers","slug":"/gers/changelog","permalink":"/gers/changelog","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1750866688000,"frontMatter":{"title":"Data Changelog"},"sidebar":"docs","previous":{"title":"Bridge Files","permalink":"/gers/bridge-files"},"next":{"title":"Registry","permalink":"/gers/registry"}}');var s=n(74848),r=n(28453),i=n(2594);const h="LOAD spatial; -- noqa\nLOAD httpfs;  -- noqa\nSET s3_region='us-west-2';\n\nSELECT id, type, change_type\nFROM read_parquet('s3://overturemaps-us-west-2/changelog/2024-06-13-beta.0/theme=buildings/type=*/change_type=*/*', filename=true, hive_partitioning=1)\nWHERE\n        bbox.xmin > 37.165914\n        AND bbox.xmax < 37.902271\n        AND bbox.ymin > 10.221917\n        AND bbox.ymax < 10.751245;\n",l="LOAD spatial; -- noqa\nLOAD httpfs;  -- noqa\nSET s3_region='us-west-2';\n\nSELECT count(*), change_type\nFROM read_parquet('s3://overturemaps-us-west-2/changelog/2024-06-13-beta.0/theme=buildings/type=*/change_type=*/*', filename=true, hive_partitioning=1)\nWHERE\n        bbox.xmin > 37.165914\n        AND bbox.xmax < 37.902271\n        AND bbox.ymin > 10.221917\n        AND bbox.ymax < 10.751245\nGROUP BY change_type;\n",o="SELECT\n    release.id,\n    release.names.\"primary\" AS primary_name,\n    release.sources [ 1 ].dataset AS primary_source,\n    change_type,\n    ST_GEOMFROMBINARY(geometry) AS geometry\nFROM v2024_08_20_0 AS release\n    INNER JOIN changelog_v2024_07_22_0 AS changelog ON release.id = changelog.id\nWHERE release.theme = 'buildings'\n    AND release.bbox.xmin > 37.165914\n    AND release.bbox.xmax < 37.902271\n    AND release.bbox.ymin > 10.221917\n    AND release.bbox.ymax < 10.751245;\n",c={title:"Data Changelog"},d=void 0,g={},u=[{value:"Types of changes",id:"types-of-changes",level:2},{value:"Querying the data changelog",id:"querying-the-data-changelog",level:2}];function p(e){const t={a:"a",code:"code",h2:"h2",img:"img",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(t.p,{children:["With each data release, Overture publishes a ",(0,s.jsx)(t.strong,{children:"changelog"})," that capture changes in the data from the previous release to the current release. This information can be used to guide decisions about data matching, better understand data stability, and help detect data errors."]}),"\n",(0,s.jsxs)(t.p,{children:["The data changelog is available as Parquet files, partitioned by ",(0,s.jsx)(t.code,{children:"theme"}),", ",(0,s.jsx)(t.code,{children:"type"}),", and ",(0,s.jsx)(t.code,{children:"change_type"})," and sorted geospatially with a unique index on ",(0,s.jsx)(t.code,{children:"id"}),". The changelog files are available at the following locations:"]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Provider"}),(0,s.jsx)(t.th,{children:"Location"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Amazon S3"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"s3://overturemaps-us-west-2/changelog/<RELEASE>"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:"Microsoft Azure"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"wasbs://changelog@overturemapswestus2.blob.core.windows.net/<RELEASE>"})})]})]})]}),"\n",(0,s.jsx)(t.p,{children:"The latest path is:"}),"\n",(0,s.jsx)(i.A,{query:"__OVERTURE_RELEASE/",language:"text"}),"\n",(0,s.jsx)(t.h2,{id:"types-of-changes",children:"Types of changes"}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"change_type"})," property in the changelog includes these types of changes to the entities:"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"added"}),": the entity with this ID is new in the current release and was not present in the previous release"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"removed"}),": the entity with this ID is not present in the current release but was present in the previous release"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"data_changed"}),": the entity with this ID in the current release contains a change in geometry or properties from the entity with this ID that was in the previous release"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"unchanged"}),": the entity with this ID in the current release matches the geometry and properties of the entity with this ID that was in the previous release"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"querying-the-data-changelog",children:"Querying the data changelog"}),"\n",(0,s.jsxs)(t.p,{children:["We can query the changelog to get a quick look at changes in data from the last release to the current release. In this example, we're using DuckDB to grab the ",(0,s.jsx)(t.code,{children:"id"}),", ",(0,s.jsx)(t.code,{children:"type"}),", and ",(0,s.jsx)(t.code,{children:"change_type"})," for buildings in several towns across the ",(0,s.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Amhara_Region",children:"Amhara Region"})," in Ethiopia."]}),"\n",(0,s.jsx)(i.A,{query:h}),"\n",(0,s.jsxs)(t.p,{children:["We can also get a count of building features by ",(0,s.jsx)(t.code,{children:"change_type"})," for our area of interest."]}),"\n",(0,s.jsx)(i.A,{query:l}),"\n",(0,s.jsxs)(t.p,{children:["Taking this one step further, this time using Athena to run our query, we can join the changelog and data via the ",(0,s.jsx)(t.code,{children:"id"})," to connect the ",(0,s.jsx)(t.code,{children:"change_type"})," and entity properties."]}),"\n",(0,s.jsx)(i.A,{query:o}),"\n",(0,s.jsxs)(t.p,{children:["Finally we can use the results of our query to visualize building features by ",(0,s.jsx)(t.code,{children:"change_type"})," and inspect the properties for each feature. The example below, created using ",(0,s.jsx)(t.a,{href:"https://kepler.gl/",children:"kepler.gl"}),", shows buildings in ",(0,s.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/Finote_Selam",children:"Finote Selam"}),", a city in the Amhara Region of Ethiopia. The data is from Overture's ",(0,s.jsx)(t.code,{children:"2024-06-13-beta.0"})," release, to which we added 100 million new buildings, many of them derived from satellite imagery by Microsoft."]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.img,{alt:"Buildings By Change Type",src:n(21614).A+"",width:"2280",height:"1668"})})]})}function x(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}}}]);